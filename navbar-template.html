<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Supabase JS CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <style>
    /* Ïù∏Ï¶ù Î™®Îã¨ Ïä§ÌÉÄÏùº */
    .auth-form .form-group {
      margin-bottom: 20px;
    }
    
    .auth-form label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #333;
    }
    
    .auth-form input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
      box-sizing: border-box;
    }
    
    .auth-form input:focus {
      outline: none;
      border-color: #0066cc;
      box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
    }
    
    .btn-primary {
      width: 100%;
      padding: 12px;
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.3s;
      margin: 20px 0 15px 0;
    }
    
    .btn-primary:hover {
      background: #0052a3;
    }
    
    .btn-google {
      width: 100%;
      padding: 12px 20px;
      border: 1px solid #dadce0;
      border-radius: 8px;
      background: white;
      color: #3c4043;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 10px 0 20px 0;
      font-size: 16px;
      transition: all 0.3s;
    }
    
    .btn-google:hover {
      background: #f8f9fa;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .btn-kakao {
      width: 100%;
      padding: 12px 20px;
      border: 1px solid #FEE500;
      border-radius: 8px;
      background: #FEE500;
      color: #3C1E1E;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 10px 0 20px 0;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s;
    }

    .btn-kakao:hover {
      background: #FDD835;
      border-color: #FDD835;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .divider {
      text-align: center;
      margin: 25px 0;
      position: relative;
    }
    
    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #ddd;
    }
    
    .divider span {
      background: white;
      padding: 0 15px;
      color: #666;
      font-size: 14px;
    }
    
    .auth-switch {
      text-align: center;
      margin-top: 20px;
      color: #666;
    }
    
    .auth-switch a {
      color: #0066cc;
      text-decoration: none;
      font-weight: 500;
    }
    
    .auth-switch a:hover {
      text-decoration: underline;
    }
    
    .status-message {
      margin-top: 15px;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
    }
    
    .status-success {
      background: #e8f5e8;
      color: #2e7d32;
      border: 1px solid #4caf50;
    }
    
    .status-error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #f44336;
    }
    
    .status-info {
      background: #e3f2fd;
      color: #1565c0;
      border: 1px solid #2196f3;
    }
    
    /* Î°úÍ∑∏Ïù∏ ÌõÑ ÏÇ¨Ïö©Ïûê ÌîÑÎ°úÌïÑ ÏòÅÏó≠ */
    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    
    .user-profile:hover {
      background: rgba(0, 102, 204, 0.1);
    }
    
    .user-profile img {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .user-profile .profile-name {
      font-weight: 500;
      color: #333;
    }

    body { 
      font-family: 'Noto Sans KR', sans-serif !important; 
      background-color: #ffffff !important;
    }
    
    /* Ìó§Îçî Î∞ùÍ≤å Ïä§ÌÉÄÏùºÎßÅ */
    .header {
      background-color: #ffffff !important;
      box-shadow: 0 2px 15px rgba(0, 102, 204, 0.08) !important;
      border-bottom: 1px solid #e9ecef !important;
      backdrop-filter: blur(10px) !important;
    }
    
    .header .sitename {
      color: #1a365d !important;
    }
    
    .navmenu a {
      color: #2c3e50 !important;
    }
    
    .navmenu a:hover {
      color: #0066cc !important;
    }
    
    .navmenu .active {
      color: #0066cc !important;
      font-weight: 600 !important;
    }

    .login-btn { 
      background: #0066cc; 
      color: white; 
      padding: 8px 20px; 
      border-radius: 5px; 
      margin-left: 25px;
      text-decoration: none;
      transition: all 0.3s;
    }
    .login-btn:hover { 
      background: #0052a3; 
      color: white;
    }
    
    /* ÏÇ¨Ïö©Ïûê ÌîÑÎ°úÌïÑ Ïä§ÌÉÄÏùº */
    .user-profile {
      margin-left: 25px;
    }
    
    .profile-icon {
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 5px 10px;
      border-radius: 25px;
    }
    
    .profile-icon:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .profile-icon img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #fff;
      margin-right: 8px;
    }
    
    .profile-name {
      color: #2c3e50;
      font-weight: 500;
      font-size: 14px;
    }
    
    /* üéØ NAVIGATION MENU FIXES */
    .navmenu ul {
      display: flex;
      align-items: center;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .navmenu > ul > li {
      white-space: nowrap;
      padding: 15px 16px; /* Í∑†Îì±Ìïú Í∞ÑÍ≤© */
      position: relative;
    }

    /* Î™®Îã¨ Ïä§ÌÉÄÏùº */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      max-height: 80%;
      overflow-y: auto;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #eee;
    }
    
    .modal-header h2 {
      margin: 0;
      color: #333;
    }
    
    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      color: #999;
      cursor: pointer;
      position: absolute;
      right: 20px;
      top: 20px;
      padding: 5px;
      width: 35px;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: color 0.3s ease;
      z-index: 1001;
    }
    
    .close-btn:hover {
      color: #333;
    }
    
    .modal-body {
      padding: 20px;
    }

    /* ÌîÑÎ°úÌïÑ Î™®Îã¨ Ïä§ÌÉÄÏùº */
    .profile-image-section {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .current-profile-image img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #667eea;
      margin-bottom: 15px;
    }
    
    .profile-image-upload button {
      background: #667eea;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }
    
    .form-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
    }
    
    .form-group input[readonly] {
      background: #f5f5f5;
    }
    
    .password-section {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    
    .password-section h3 {
      margin-bottom: 20px;
      color: #333;
    }
    
    .btn-change-password {
      width: 100%;
      background: #28a745;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }
    
    .btn-change-password:hover {
      background: #218838;
    }
    
    .modal-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-top: 1px solid #eee;
      gap: 10px;
    }
    
    .btn-logout {
      background: #dc3545;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      white-space: nowrap;
      min-width: 80px;
    }
    
    .btn-logout:hover {
      background: #c82333;
    }
    
    .btn-close {
      background: #6c757d;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.3s ease;
      white-space: nowrap;
      min-width: 80px;
    }
    
    .btn-close:hover {
      background: #545b62;
    }
  </style>

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
</head>

<body>
  <!-- Header/Navigation -->
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="index.html" class="logo d-flex align-items-center me-auto">
        <img src="logo.jpg" alt="ÎÇ®Í≤ΩÏä§Ìã∏ Î°úÍ≥†" style="height: 40px; margin-right: 10px;">
        <h1 class="sitename" id="companyNameHeader">ÎÇ®Í≤ΩÏä§Ìã∏(Ï£º)</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html" class="active">Ìôà</a></li>
          <li class="dropdown"><a href="#about"><span>ÌöåÏÇ¨ÏÜåÍ∞ú</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="ceo-message.html">CEO Ïù∏ÏÇ¨Îßê</a></li>
              <li><a href="company-history.html">ÌöåÏÇ¨Ïó∞ÌòÅ</a></li>
              <li><a href="vision-mission.html">ÎπÑÏ†Ñ/ÎØ∏ÏÖò</a></li>
              <li><a href="organization.html">Ï°∞ÏßÅÎèÑ</a></li>
              <li><a href="certificates.html">Ïù∏Ï¶ùÏÑú</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#services"><span>Ï†úÌíàÏÜåÍ∞ú</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="service1-details.html">Ïó¥Ïó∞Í∞ïÌåê</a></li>
              <li><a href="service2-details.html">ÎÉâÏó∞Í∞ïÌåê</a></li>
              <li><a href="service3-details.html">ÌäπÏàòÍ∞ï</a></li>
              <li><a href="service4-details.html">ÎßûÏ∂§ Í∞ÄÍ≥µ</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>ÏÇ¨ÏóÖÏòÅÏó≠</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="steel-manufacturing.html">Ï≤†Í∞ïÏ†úÏ°∞</a></li>
              <li><a href="processing-service.html">Í∞ÄÍ≥µÏÑúÎπÑÏä§</a></li>
              <li><a href="tech-research.html">Í∏∞Ïà†Ïó∞Íµ¨</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>Í≥†Í∞ùÏÑºÌÑ∞</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="quote-inquiry.html">Í≤¨Ï†ÅÎ¨∏Ïùò</a></li>
              <li><a href="catalog.html">Ïπ¥ÌÉàÎ°úÍ∑∏</a></li>
              <li><a href="faq.html">FAQ</a></li>
              <li><a href="location.html">Ïò§ÏãúÎäîÍ∏∏</a></li>
              <li><a href="product-inquiry.html">Ï†úÌíàÎ¨∏Ïùò</a></li>
              <li><a href="technical-support.html">Í∏∞Ïà†ÏßÄÏõê</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>ÌôçÎ≥¥ÏÑºÌÑ∞</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="notice.html">Í≥µÏßÄÏÇ¨Ìï≠</a></li>
              <li><a href="newsroom.html">Îâ¥Ïä§Î£∏</a></li>
              <li><a href="media-materials.html">ÌôçÎ≥¥ÏûêÎ£å</a></li>
            </ul>
          </li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <!-- Î°úÍ∑∏Ïù∏ Î≤ÑÌäº -->
      <a class="login-btn" href="#" onclick="showLoginModal(); return false;" id="mainLoginBtn">
        <i class="bi bi-person-circle"></i> <span id="loginBtnText">Î°úÍ∑∏Ïù∏</span>
      </a>
      
      <!-- Î°úÍ∑∏Ïù∏ ÌõÑ ÌîÑÎ°úÌïÑ ÏïÑÏù¥ÏΩò -->
      <div class="user-profile" id="userProfile" style="display: none;">
        <div class="profile-icon" onclick="handleProfileClick()">
          <img id="profileImage" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB4PSIyMCIgeT0iMjQiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfkYQ8L3N2Zz4KPC9zdmc+" alt="ÌîÑÎ°úÌïÑ" />
          <span class="profile-name" id="profileName">ÏÇ¨Ïö©Ïûê</span>
        </div>
      </div>

    </div>
  </header>

  <!-- Î°úÍ∑∏Ïù∏/ÌöåÏõêÍ∞ÄÏûÖ Î™®Îã¨ -->
  <div id="authModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="authModalTitle">Î°úÍ∑∏Ïù∏</h2>
        <button class="close-btn" onclick="closeAuthModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <!-- Î°úÍ∑∏Ïù∏ Ìèº -->
        <div id="loginForm" class="auth-form">
          <div class="form-group">
            <label>Ïù¥Î©îÏùº</label>
            <input type="email" id="loginEmail" placeholder="Ïù¥Î©îÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
          </div>
          
          <div class="form-group">
            <label>ÎπÑÎ∞ÄÎ≤àÌò∏</label>
            <input type="password" id="loginPassword" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
          </div>
          
          <button type="button" onclick="handleEmailLogin()" class="btn-primary">Î°úÍ∑∏Ïù∏</button>
          
          <!-- Íµ¨Î∂ÑÏÑ† -->
          <div class="divider">
            <span>ÎòêÎäî</span>
          </div>
          
          <!-- Google Î°úÍ∑∏Ïù∏ -->
          <button type="button" onclick="handleGoogleLogin()" class="btn-google">
            <svg width="18" height="18" viewBox="0 0 18 18">
              <g fill="none" fill-rule="evenodd">
                <path d="M17.64 9.205c0-.639-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z" fill="#4285F4"/>
                <path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z" fill="#34A853"/>
                <path d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                <path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/>
              </g>
            </svg>
            GoogleÎ°ú Î°úÍ∑∏Ïù∏
          </button>

          <!-- Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏ -->
          <button type="button" onclick="handleKakaoLogin()" class="btn-kakao">
            <svg width="18" height="18" viewBox="0 0 18 18">
              <g fill="none" fill-rule="evenodd">
                <path d="M9 0C4.03 0 0 3.13 0 7c0 2.52 1.67 4.74 4.19 6.04L3.5 16.5c-.13.47.35.85.76.6l3.92-2.65c.28.02.55.05.82.05 4.97 0 9-3.13 9-7S13.97 0 9 0z" fill="#3C1E1E"/>
              </g>
            </svg>
            Ïπ¥Ïπ¥Ïò§Î°ú Î°úÍ∑∏Ïù∏
          </button>
          
          <div class="auth-switch">
            Í≥ÑÏ†ïÏù¥ ÏóÜÏúºÏã†Í∞ÄÏöî? <a href="#" onclick="showRegisterForm()">ÌöåÏõêÍ∞ÄÏûÖ</a>
          </div>
        </div>
        
        <!-- ÌöåÏõêÍ∞ÄÏûÖ Ìèº -->
        <div id="registerForm" class="auth-form" style="display: none;">
          <div class="form-group">
            <label>Ïù¥Î¶Ñ</label>
            <input type="text" id="registerName" placeholder="Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
          </div>
          
          <div class="form-group">
            <label>Ïù¥Î©îÏùº</label>
            <input type="email" id="registerEmail" placeholder="Ïù¥Î©îÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
          </div>
          
          <div class="form-group">
            <label>ÎπÑÎ∞ÄÎ≤àÌò∏</label>
            <input type="password" id="registerPassword" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (ÏµúÏÜå 6Ïûê)" required minlength="6">
          </div>
          
          <div class="form-group">
            <label>ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏</label>
            <input type="password" id="confirmPassword" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Îã§Ïãú ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
          </div>
          
          <div class="form-group">
            <label>Î∂ÄÏÑú (ÏÑ†ÌÉùÏÇ¨Ìï≠)</label>
            <input type="text" id="registerDepartment" placeholder="Î∂ÄÏÑúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
          </div>
          
          <div class="form-group">
            <label>ÏßÅÏ±Ö (ÏÑ†ÌÉùÏÇ¨Ìï≠)</label>
            <input type="text" id="registerPosition" placeholder="ÏßÅÏ±ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
          </div>
          
          <button type="button" onclick="handleRegister()" class="btn-primary">ÌöåÏõêÍ∞ÄÏûÖ</button>
          
          <div class="auth-switch">
            Ïù¥ÎØ∏ Í≥ÑÏ†ïÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî? <a href="#" onclick="showLoginForm()">Î°úÍ∑∏Ïù∏</a>
          </div>
        </div>
        
        <div id="authStatus" class="status-message" style="display: none;"></div>
      </div>
    </div>
  </div>

  <!-- ÌîÑÎ°úÌïÑ Î™®Îã¨ -->
  <div class="modal" id="profileModal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï</h2>
        <button class="close-btn" onclick="hideProfileModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <div class="profile-section">
          <div class="profile-image-section">
            <div class="current-profile-image">
              <img id="modalProfileImage" src="" alt="ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ" />
            </div>
            <div class="profile-image-upload">
              <input type="file" id="profileImageInput" accept="image/*" style="display: none;" onchange="handleProfileImageUpload(event)">
              <button type="button" onclick="document.getElementById('profileImageInput').click()">Ïù¥ÎØ∏ÏßÄ Î≥ÄÍ≤Ω</button>
            </div>
          </div>
          
          <form id="profileForm">
            <div class="form-group">
              <label>Ïù¥Î¶Ñ</label>
              <input type="text" id="profileUserName" readonly>
            </div>
            
            <div class="form-group">
              <label>Ïù¥Î©îÏùº</label>
              <input type="email" id="profileUserEmail" readonly>
            </div>
            
            <div class="form-group">
              <label>Î∂ÄÏÑú</label>
              <input type="text" id="profileUserDepartment" readonly>
            </div>
            
            <div class="form-group">
              <label>ÏßÅÏ±Ö</label>
              <input type="text" id="profileUserPosition" readonly>
            </div>
          </form>
        </div>
        
        <div class="password-section">
          <h3>ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</h3>
          <form id="passwordChangeForm">
            <div class="form-group">
              <label>ÌòÑÏû¨ ÎπÑÎ∞ÄÎ≤àÌò∏</label>
              <input type="password" id="currentPassword" required>
            </div>
            
            <div class="form-group">
              <label>ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏</label>
              <input type="password" id="newPassword" required minlength="6">
            </div>
            
            <div class="form-group">
              <label>ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏</label>
              <input type="password" id="confirmNewPassword" required>
            </div>
            
            <button type="submit" class="btn-change-password">ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</button>
          </form>
        </div>
      </div>
      
      <div class="modal-footer">
        <button onclick="logout()" class="btn-logout">Î°úÍ∑∏ÏïÑÏõÉ</button>
        <button onclick="hideProfileModal()" class="btn-close">Îã´Í∏∞</button>
      </div>
    </div>
  </div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- Supabase Î∞è Î°úÍ∑∏Ïù∏ Í∏∞Îä• -->
  <script>
    // Supabase ÏÑ§Ï†ï
    const SUPABASE_URL = 'https://zgyawfmjconubxaiamod.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpneWF3Zm1qY29udWJ4YWlhbW9kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3NjQzNzIsImV4cCI6MjA2NzM0MDM3Mn0.shjBE2OQeILwkLLi4E6Bq0-b6YPUs-WFwquexdUiM9A';
    
    // Supabase ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï¥àÍ∏∞Ìôî
    let supabaseClient = null;
    
    try {
      supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
        auth: {
          persistSession: true,
          detectSessionInUrl: true,
          autoRefreshToken: true
        }
      });
      console.log('‚úÖ Supabase ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï¥àÍ∏∞Ìôî ÏôÑÎ£å');
    } catch (error) {
      console.error('‚ùå Supabase Ï¥àÍ∏∞Ìôî Ïò§Î•ò:', error);
    }
    
    // ÏÉÅÌÉú ÌëúÏãú Ìï®Ïàò
    function showStatus(message, type = 'info') {
      const status = document.getElementById('authStatus');
      status.style.display = 'block';
      status.className = `status-message status-${type}`;
      status.textContent = message;
      
      console.log(`${type.toUpperCase()}: ${message}`);
    }
    
    // Ïù∏Ï¶ù Î™®Îã¨ Ïó¥Í∏∞ (Î°úÍ∑∏Ïù∏ Ìèº)
    function showLoginModal() {
      console.log('üîê Î°úÍ∑∏Ïù∏ Î™®Îã¨ Ïó¥Í∏∞');
      document.getElementById('authModal').style.display = 'flex';
      showLoginForm();
    }
    
    // Ïù∏Ï¶ù Î™®Îã¨ Îã´Í∏∞
    function closeAuthModal() {
      console.log('‚ùå Ïù∏Ï¶ù Î™®Îã¨ Îã´Í∏∞');
      document.getElementById('authModal').style.display = 'none';
      // Ìèº Ï¥àÍ∏∞Ìôî
      clearAuthForms();
    }
    
    // Î°úÍ∑∏Ïù∏ Ìèº ÌëúÏãú
    function showLoginForm() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('registerForm').style.display = 'none';
      document.getElementById('authModalTitle').textContent = 'Î°úÍ∑∏Ïù∏';
      document.getElementById('authStatus').style.display = 'none';
    }
    
    // ÌöåÏõêÍ∞ÄÏûÖ Ìèº ÌëúÏãú
    function showRegisterForm() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('registerForm').style.display = 'block';
      document.getElementById('authModalTitle').textContent = 'ÌöåÏõêÍ∞ÄÏûÖ';
      document.getElementById('authStatus').style.display = 'none';
    }
    
    // Ìèº Ï¥àÍ∏∞Ìôî
    function clearAuthForms() {
      // Î°úÍ∑∏Ïù∏ Ìèº Ï¥àÍ∏∞Ìôî
      document.getElementById('loginEmail').value = '';
      document.getElementById('loginPassword').value = '';
      
      // ÌöåÏõêÍ∞ÄÏûÖ Ìèº Ï¥àÍ∏∞Ìôî
      document.getElementById('registerName').value = '';
      document.getElementById('registerEmail').value = '';
      document.getElementById('registerPassword').value = '';
      document.getElementById('confirmPassword').value = '';
      document.getElementById('registerDepartment').value = '';
      document.getElementById('registerPosition').value = '';
      
      // ÏÉÅÌÉú Î©îÏãúÏßÄ Ïà®Í∏∞Í∏∞
      document.getElementById('authStatus').style.display = 'none';
    }
    
    // Ïù¥Î©îÏùº Î°úÍ∑∏Ïù∏
    async function handleEmailLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showStatus('Ïù¥Î©îÏùºÍ≥º ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.', 'error');
        return;
      }
      
      showStatus('Î°úÍ∑∏Ïù∏ Ï§ë...', 'info');
      
      try {
        const { data, error } = await supabaseClient.auth.signInWithPassword({
          email: email,
          password: password
        });
        
        if (error) {
          showStatus('Î°úÍ∑∏Ïù∏ Ïã§Ìå®: ' + error.message, 'error');
        } else {
          showStatus('Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ!', 'success');
          console.log('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥:', data.user);
          
          // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû• Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏
          const user = {
            id: data.user.id,
            email: data.user.email,
            name: data.user.user_metadata?.name || data.user.email,
            profileImage: data.user.user_metadata?.avatar_url,
            provider: 'email'
          };
          
          saveUserAndUpdateUI(user);
          closeAuthModal();
          
          // employee-dashboardÎ°ú Ïù¥Îèô
          setTimeout(() => {
            window.location.href = 'employee-dashboard.html';
          }, 1000);
        }
      } catch (error) {
        showStatus('Î°úÍ∑∏Ïù∏ Ïò§Î•ò: ' + error.message, 'error');
      }
    }
    
    // ÌöåÏõêÍ∞ÄÏûÖ
    async function handleRegister() {
      const name = document.getElementById('registerName').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const department = document.getElementById('registerDepartment').value;
      const position = document.getElementById('registerPosition').value;
      
      // Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
      if (!name || !email || !password) {
        showStatus('Ïù¥Î¶Ñ, Ïù¥Î©îÏùº, ÎπÑÎ∞ÄÎ≤àÌò∏Îäî ÌïÑÏàò ÏûÖÎ†• Ìï≠Î™©ÏûÖÎãàÎã§.', 'error');
        return;
      }
      
      if (password !== confirmPassword) {
        showStatus('ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.', 'error');
        return;
      }
      
      if (password.length < 6) {
        showStatus('ÎπÑÎ∞ÄÎ≤àÌò∏Îäî ÏµúÏÜå 6Ïûê Ïù¥ÏÉÅÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§.', 'error');
        return;
      }
      
      showStatus('ÌöåÏõêÍ∞ÄÏûÖ Ï§ë...', 'info');
      
      try {
        const { data, error } = await supabaseClient.auth.signUp({
          email: email,
          password: password,
          options: {
            data: {
              name: name,
              department: department,
              position: position,
              company_domain: 'namkyungsteel.com',
              company_name: 'ÎÇ®Í≤ΩÏä§Ìã∏(Ï£º)'
            }
          }
        });
        
        if (error) {
          showStatus('ÌöåÏõêÍ∞ÄÏûÖ Ïã§Ìå®: ' + error.message, 'error');
        } else {
          console.log('Supabase Auth ÌöåÏõêÍ∞ÄÏûÖ ÏÑ±Í≥µ:', data);
          
          // Ïª§Ïä§ÌÖÄ users ÌÖåÏù¥Î∏îÏóêÎèÑ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû•
          try {
            if (data.user) {
              const { data: insertData, error: insertError } = await supabaseClient
                .from('users')
                .insert([
                  {
                    id: data.user.id,
                    email: email,
                    name: name,
                    department: department || '',
                    position: position || '',
                    company_domain: 'namkyungsteel.com',
                    company_name: 'ÎÇ®Í≤ΩÏä§Ìã∏(Ï£º)',
                    role: 'employee',
                    created_at: new Date().toISOString()
                  }
                ]);
              
              if (insertError) {
                console.error('‚ùå users ÌÖåÏù¥Î∏î Ï†ÄÏû• Ïò§Î•ò:', insertError);
                showStatus('ÌöåÏõêÍ∞ÄÏûÖÏùÄ ÏÑ±Í≥µÌñàÏßÄÎßå ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
              } else {
                console.log('‚úÖ users ÌÖåÏù¥Î∏îÏóê ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû• ÏôÑÎ£å:', insertData);
                showStatus('ÌöåÏõêÍ∞ÄÏûÖ ÏÑ±Í≥µ! Ïù¥Î©îÏùºÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.', 'success');
              }
            }
          } catch (tableError) {
            console.error('‚ùå users ÌÖåÏù¥Î∏î Ï†ÄÏû• ÏòàÏô∏:', tableError);
          }
          
          // ÏûêÎèô Î°úÍ∑∏Ïù∏Ïù¥ ÎêòÏóàÎã§Î©¥ UI ÏóÖÎç∞Ïù¥Ìä∏
          if (data.user && data.session) {
            const user = {
              id: data.user.id,
              email: data.user.email,
              name: name,
              department: department,
              position: position,
              provider: 'email'
            };
            
            saveUserAndUpdateUI(user);
            closeAuthModal();
            
            // employee-dashboardÎ°ú Ïù¥Îèô
            setTimeout(() => {
              window.location.href = 'employee-dashboard.html';
            }, 1000);
          }
        }
      } catch (error) {
        showStatus('ÌöåÏõêÍ∞ÄÏûÖ Ïò§Î•ò: ' + error.message, 'error');
      }
    }
    
    // Google Î°úÍ∑∏Ïù∏
    async function handleGoogleLogin() {
      console.log('üîê Google Î°úÍ∑∏Ïù∏ ÏãúÏûë');
      showStatus('Google Î°úÍ∑∏Ïù∏ Ï§ë...', 'info');
      
      try {
        const { data, error } = await supabaseClient.auth.signInWithOAuth({
          provider: 'google',
          options: {
            redirectTo: window.location.origin + window.location.pathname
          }
        });
        
        if (error) {
          console.error('‚ùå Google Î°úÍ∑∏Ïù∏ Ïò§Î•ò:', error);
          showStatus('Google Î°úÍ∑∏Ïù∏ Ïã§Ìå®: ' + error.message, 'error');
        } else {
          console.log('‚úÖ Google Î°úÍ∑∏Ïù∏ Î¶¨Îã§Ïù¥Î†âÌä∏ ÏãúÏûë:', data);
          showStatus('Google ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô Ï§ë...', 'info');
        }
      } catch (error) {
        console.error('‚ùå Google Î°úÍ∑∏Ïù∏ ÏòàÏô∏:', error);
        showStatus('Google Î°úÍ∑∏Ïù∏ Ïò§Î•ò: ' + error.message, 'error');
      }
    }
    
    // Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏ (placeholder)
    async function handleKakaoLogin() {
      showStatus('Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏ÏùÄ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.', 'info');
    }
    
    // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû• Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏
    function saveUserAndUpdateUI(user) {
      // sessionStorageÏóê ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû• (Î∏åÎùºÏö∞Ï†Ä ÏÑ∏ÏÖò ÎèôÏïàÎßå Ïú†ÏßÄ)
      sessionStorage.setItem('currentUser', JSON.stringify(user));
      
      // UI ÏóÖÎç∞Ïù¥Ìä∏
      updateUIForLoggedInUser(user);
      
      console.log('‚úÖ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû• Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å:', user);
    }
    
    // Î°úÍ∑∏Ïù∏Îêú ÏÇ¨Ïö©ÏûêÏö© UI ÏóÖÎç∞Ïù¥Ìä∏
    function updateUIForLoggedInUser(user) {
      const loginBtn = document.getElementById('mainLoginBtn');
      const userProfile = document.getElementById('userProfile');
      
      if (loginBtn && userProfile) {
        // Î°úÍ∑∏Ïù∏ Î≤ÑÌäº Ïà®Í∏∞Í∏∞
        loginBtn.style.display = 'none';
        
        // ÏÇ¨Ïö©Ïûê ÌîÑÎ°úÌïÑ ÌëúÏãú
        userProfile.style.display = 'flex';
        
        // ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï
        const profileImage = document.getElementById('profileImage');
        if (user.profileImage) {
          profileImage.src = user.profileImage;
        }
        
        // ÏÇ¨Ïö©Ïûê Ïù¥Î¶Ñ ÏÑ§Ï†ï
        const profileName = document.getElementById('profileName');
        if (profileName) {
          profileName.textContent = user.name;
        }
      }
    }
    
    // Î°úÍ∑∏ÏïÑÏõÉÎêú ÏÉÅÌÉúÏö© UI ÏóÖÎç∞Ïù¥Ìä∏
    function updateUIForLoggedOutUser() {
      const loginBtn = document.getElementById('mainLoginBtn');
      const userProfile = document.getElementById('userProfile');
      
      if (loginBtn && userProfile) {
        // Î°úÍ∑∏Ïù∏ Î≤ÑÌäº ÌëúÏãú
        loginBtn.style.display = 'flex';
        
        // ÏÇ¨Ïö©Ïûê ÌîÑÎ°úÌïÑ Ïà®Í∏∞Í∏∞
        userProfile.style.display = 'none';
      }
    }
    
    // Î°úÍ∑∏ÏïÑÏõÉ
    function logout() {
      sessionStorage.removeItem('currentUser');
      updateUIForLoggedOutUser();
      console.log('üö™ Î°úÍ∑∏ÏïÑÏõÉ ÏôÑÎ£å');
      
      // ÌîÑÎ°úÌïÑ Î™®Îã¨ Îã´Í∏∞
      hideProfileModal();
      
      // Î©îÏù∏ ÌéòÏù¥ÏßÄÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 100);
    }
    
    // ÌîÑÎ°úÌïÑ ÌÅ¥Î¶≠ Ìï∏Îì§Îü¨
    function handleProfileClick() {
      showProfileModal();
    }
    
    // Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄ ÏÉùÏÑ± Ìï®Ïàò
    function generateDefaultAvatar(name) {
      // Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄ Ïù¥ÎØ∏ÏßÄ Î∞òÌôò
      return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB4PSIyMCIgeT0iMjQiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfkYQ8L3N2Zz4KPC9zdmc+';
    }

    // ÌîÑÎ°úÌïÑ Î™®Îã¨ ÌëúÏãú
    function showProfileModal() {
      const currentUser = sessionStorage.getItem('currentUser');
      if (currentUser) {
        try {
          const user = JSON.parse(currentUser);
          
          // ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï
          const modalProfileImage = document.getElementById('modalProfileImage');
          if (user.profileImage) {
            modalProfileImage.src = user.profileImage;
          } else {
            // Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄ ÏÉùÏÑ±
            modalProfileImage.src = generateDefaultAvatar(user.name || user.email);
          }
          
          // ÌîÑÎ°úÌïÑ Î™®Îã¨ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
          document.getElementById('profileUserName').value = user.name || '';
          document.getElementById('profileUserEmail').value = user.email || '';
          document.getElementById('profileUserDepartment').value = user.department || '';
          document.getElementById('profileUserPosition').value = user.position || '';
          
          // Î™®Îã¨ ÌëúÏãú
          document.getElementById('profileModal').style.display = 'flex';
        } catch (error) {
          console.error('‚ùå ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú Ïò§Î•ò:', error);
        }
      }
    }
    
    // ÌîÑÎ°úÌïÑ Î™®Îã¨ Ïà®Í∏∞Í∏∞
    function hideProfileModal() {
      document.getElementById('profileModal').style.display = 'none';
    }
    
    // ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú
    async function handleProfileImageUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      // ÌååÏùº ÌÅ¨Í∏∞ Ï†úÌïú (2MB)
      if (file.size > 2 * 1024 * 1024) {
        alert('Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞Îäî 2MB Ïù¥ÌïòÏó¨Ïïº Ìï©ÎãàÎã§.');
        return;
      }
      
      // Ïù¥ÎØ∏ÏßÄ ÌååÏùº ÌôïÏù∏
      if (!file.type.startsWith('image/')) {
        alert('Ïù¥ÎØ∏ÏßÄ ÌååÏùºÎßå ÏóÖÎ°úÎìú Í∞ÄÎä•Ìï©ÎãàÎã§.');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = async function(e) {
        const imageData = e.target.result;
        
        try {
          const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
          currentUser.profileImage = imageData;
          
          // sessionStorage ÏóÖÎç∞Ïù¥Ìä∏
          sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
          
          // UI ÏóÖÎç∞Ïù¥Ìä∏
          document.getElementById('modalProfileImage').src = imageData;
          document.getElementById('profileImage').src = imageData;
          
          alert('ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§.');
        } catch (error) {
          console.error('‚ùå ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ïò§Î•ò:', error);
          alert('ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
        }
      };
      
      reader.readAsDataURL(file);
    }
    
    // OAuth ÏΩúÎ∞± Ï≤òÎ¶¨
    async function handleOAuthCallback() {
      const urlParams = new URLSearchParams(window.location.search);
      const hashParams = new URLSearchParams(window.location.hash.substring(1));
      
      if (urlParams.get('code') || hashParams.get('access_token') || window.location.hash.includes('access_token')) {
        console.log('üîê OAuth ÏΩúÎ∞± Í∞êÏßÄÎê®');
        
        try {
          const { data: { session }, error } = await supabaseClient.auth.getSession();
          
          if (error && !error.message.includes('skew')) {
            console.error('‚ùå ÏÑ∏ÏÖò ÌôïÏù∏ Ïò§Î•ò:', error);
            return;
          }
          
          if (session && session.user) {
            console.log('‚úÖ OAuth Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ:', session.user);
            
            // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû•
            const actualProvider = session.user.app_metadata?.provider || 'unknown';
            const user = {
              id: session.user.id,
              email: session.user.email,
              name: session.user.user_metadata?.name || session.user.user_metadata?.full_name || session.user.email,
              profileImage: session.user.user_metadata?.avatar_url || session.user.user_metadata?.picture,
              provider: actualProvider
            };
            
            // users ÌÖåÏù¥Î∏îÏóê ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû• (ÏóÜÏúºÎ©¥ ÏÉùÏÑ±)
            try {
              const { data: existingUser, error: selectError } = await supabaseClient
                .from('users')
                .select('id')
                .eq('id', user.id)
                .single();
              
              if (!existingUser) {
                // ÏÉà ÏÇ¨Ïö©ÏûêÎùºÎ©¥ users ÌÖåÏù¥Î∏îÏóê Ï†ÄÏû•
                const { data: insertData, error: insertError } = await supabaseClient
                  .from('users')
                  .insert([
                    {
                      id: user.id,
                      email: user.email,
                      name: user.name,
                      company_domain: 'namkyungsteel.com',
                      company_name: 'ÎÇ®Í≤ΩÏä§Ìã∏(Ï£º)',
                      role: null,
                      provider: actualProvider,
                      is_approved: false,
                      is_active: true,
                      created_at: new Date().toISOString()
                    }
                  ]);
                
                if (insertError) {
                  console.error('‚ùå Google ÏÇ¨Ïö©Ïûê Ï†ÄÏû• Ïò§Î•ò:', insertError);
                } else {
                  console.log('‚úÖ Google ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû• ÏôÑÎ£å:', insertData);
                }
              }
            } catch (tableError) {
              console.error('‚ùå Google ÏÇ¨Ïö©Ïûê ÌÖåÏù¥Î∏î Ï≤òÎ¶¨ ÏòàÏô∏:', tableError);
            }
            
            saveUserAndUpdateUI(user);
            
            // URL Ï†ïÎ¶¨
            window.history.replaceState({}, document.title, window.location.pathname);
            
            // Î°úÍ∑∏Ïù∏ Ï†úÍ≥µÏûêÏóê Îî∞Î•∏ Î©îÏãúÏßÄ ÌëúÏãú
            const provider = user.provider || 'OAuth';
            let providerName = '';
            if (provider === 'google') {
                providerName = 'Google';
            } else if (provider === 'kakao') {
                providerName = 'Ïπ¥Ïπ¥Ïò§';
            } else {
                providerName = 'ÏÜåÏÖú';
            }
            alert(`${providerName} Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ! ÌôòÏòÅÌï©ÎãàÎã§, ${user.name}`);
            
            // employee-dashboardÎ°ú Ï¶âÏãú Ïù¥Îèô
            window.location.href = 'employee-dashboard.html';
          }
        } catch (error) {
          if (!error.message.includes('skew')) {
            console.error('‚ùå OAuth ÏΩúÎ∞± Ï≤òÎ¶¨ Ïò§Î•ò:', error);
          }
        }
      }
    }
    
    // Ï†ÄÏû•Îêú ÏÇ¨Ïö©Ïûê ÏÑ∏ÏÖò ÌôïÏù∏ Î∞è Î≥µÏõê
    function checkAndRestoreUserSession() {
      const currentUser = sessionStorage.getItem('currentUser');
      if (currentUser) {
        try {
          const user = JSON.parse(currentUser);
          console.log('‚úÖ Ï†ÄÏû•Îêú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î≥µÏõê:', user);
          updateUIForLoggedInUser(user);
        } catch (error) {
          console.error('‚ùå ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌååÏã± Ïò§Î•ò:', error);
          sessionStorage.removeItem('currentUser');
          updateUIForLoggedOutUser();
        }
      } else {
        console.log('‚ÑπÔ∏è Ï†ÄÏû•Îêú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏóÜÏùå');
        updateUIForLoggedOutUser();
      }
    }
    
    // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏÇ¨Ïö©Ïûê ÏÉÅÌÉú ÌôïÏù∏ Î∞è OAuth ÏΩúÎ∞± Ï≤òÎ¶¨
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üìÑ ÌéòÏù¥ÏßÄ Î°úÎìúÎê®');
      
      // Î®ºÏ†Ä Ï†ÄÏû•Îêú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌôïÏù∏ Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏
      checkAndRestoreUserSession();
      
      // OAuth ÏΩúÎ∞± Ï≤òÎ¶¨
      handleOAuthCallback();
      
      // ÎìúÎ°≠Îã§Ïö¥ Î©îÎâ¥ ÌÅ¥Î¶≠ Í∏∞Îä• (Î™®Î∞îÏùºÏö©)
      const dropdownToggles = document.querySelectorAll('.toggle-dropdown');
      
      dropdownToggles.forEach(function(toggle) {
        toggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const dropdown = this.closest('.dropdown');
          const isActive = dropdown.classList.contains('active');
          
          // Îã§Î•∏ Î™®Îì† ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞
          document.querySelectorAll('.dropdown.active').forEach(function(activeDropdown) {
            if (activeDropdown !== dropdown) {
              activeDropdown.classList.remove('active');
            }
          });
          
          // ÌòÑÏû¨ ÎìúÎ°≠Îã§Ïö¥ ÌÜ†Í∏Ä
          dropdown.classList.toggle('active', !isActive);
        });
      });
      
      // Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.dropdown')) {
          document.querySelectorAll('.dropdown.active').forEach(function(dropdown) {
            dropdown.classList.remove('active');
          });
        }
      });
    });
    
    // Ï†ÑÏó≠ Ìï®ÏàòÎ°ú ÌÖåÏä§Ìä∏ Í∞ÄÎä•ÌïòÎèÑÎ°ù
    window.testGoogleLogin = handleGoogleLogin;
    window.testSupabase = function() {
      console.log('Supabase ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏:', supabaseClient);
      return supabaseClient !== null;
    };
  </script>
</body>
</html>