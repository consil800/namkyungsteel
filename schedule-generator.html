<!doctype html>
<html lang="ko">
<head>
  <!-- CDN Cache Bust: 2026-01-03T18:50:00 -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ì—…ì²´ ë°©ë¬¸ ìŠ¤ì¼€ì¤„ ìë™ ìƒì„±</title>

  <!-- Supabase JS (ë¸Œë¼ìš°ì € CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- SortableJS -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.6/Sortable.min.js"></script>

  <style>
    :root{
      --bg:#f6f7fb;
      --card:#fff;
      --text:#111;
      --muted:#666;
      --line:#e6e8ec;
      --shadow:0 2px 10px rgba(0,0,0,.06);
      --radius:14px;

      --green:#2e7d32;
      --gray:#6b7280;
      --blue:#2563eb;
      --red:#dc2626;
      --yellow:#ca8a04;
      --orange:#ea580c;
      --sky:#0284c7;
      --purple:#7c3aed;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* ===== ìƒë‹¨ ë°” ===== */
    .topbar{
      position:sticky; top:0; z-index:20;
      background:rgba(246,247,251,.92);
      backdrop-filter: blur(8px);
      border-bottom:1px solid var(--line);
    }
    .topbar-inner{
      max-width:1400px; margin:0 auto;
      display:flex; align-items:center; gap:12px;
      padding:12px 14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
    }
    .back-btn{
      background:none;
      border:none;
      font-size:20px;
      cursor:pointer;
      padding:4px 8px;
      border-radius:8px;
    }
    .back-btn:hover{ background:#eee; }
    .pill{
      font-size:12px; color:#0b3; background:#eafff0;
      border:1px solid #b9f6cf;
      padding:4px 10px; border-radius:999px;
    }
    .spacer{ flex:1; }
    .btn{
      border:1px solid var(--line);
      background:#fff; color:#111;
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
      box-shadow:0 1px 2px rgba(0,0,0,.04);
    }
    .btn:hover{ border-color:#cfd6e4; }
    .btn.primary{
      background:#111; color:#fff; border-color:#111;
    }
    .btn.danger{
      background:#fff; color:#b00020; border-color:#ffd2d8;
    }

    /* ===== 3íŒ¨ë„ ë ˆì´ì•„ì›ƒ =====
       - ì¢Œì¸¡: ì¡°ê±´/í•„í„°/ìƒì„±
       - ì¤‘ì•™: ìŠ¤ì¼€ì¤„(ê¸°ê°„ ë¦¬ìŠ¤íŠ¸)
       - ìš°ì¸¡: ìƒì„¸/ë¯¸ë°°ì •/íœ´ë¬´ ë“œë¡­ì¡´
    */
    .app{
      max-width:1400px;
      margin:14px auto 30px;
      padding:0 14px;
      display:grid;
      grid-template-columns: 360px 1fr 360px;
      gap:14px;
      align-items:start;
    }

    @media (max-width: 1200px){
      .app{ grid-template-columns: 360px 1fr; }
      .right{ grid-column: 1 / -1; }
    }
    @media (max-width: 820px){
      .app{ grid-template-columns: 1fr; }
      .left,.center,.right{ grid-column: 1 / -1; }
      .topbar-inner{ flex-wrap:wrap; }
    }

    .panel{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .panel .hd{
      padding:12px 14px;
      border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      background:#fff;
    }
    .panel .hd .title{
      font-weight:800;
    }
    .panel .bd{
      padding:12px 14px;
    }

    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    label{ font-size:12px; color:var(--muted); display:block; margin-bottom:6px; }
    input[type="date"], input[type="text"], select{
      width:100%; padding:10px 10px;
      border:1px solid var(--line);
      border-radius:12px;
      outline:none;
      background:#fff;
    }

    .section{ margin-top:12px; }
    .section:first-child{ margin-top:0; }

    .hint{ font-size:12px; color:var(--muted); line-height:1.35; }
    .kpi{
      display:grid; grid-template-columns:1fr 1fr;
      gap:10px;
    }
    .kpi .box{
      border:1px solid var(--line); border-radius:12px;
      padding:10px;
      background:#fafbff;
    }
    .kpi .box .k{ font-size:12px; color:var(--muted); }
    .kpi .box .v{ font-size:16px; font-weight:900; margin-top:2px; }

    /* ===== í•„í„° UI ===== */
    .chiprow{ display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      border:1px solid var(--line);
      background:#fff;
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      display:flex; align-items:center; gap:8px;
      cursor:pointer;
      user-select:none;
    }
    .chip[data-on="1"]{
      border-color:#111;
      box-shadow:0 0 0 2px rgba(0,0,0,.05);
    }
    .dot{ width:10px; height:10px; border-radius:999px; }
    .dot.green{ background:var(--green); }
    .dot.gray{ background:var(--gray); }
    .dot.blue{ background:var(--blue); }
    .dot.red{ background:var(--red); }
    .dot.yellow{ background:var(--yellow); }
    .dot.orange{ background:var(--orange); }
    .dot.sky{ background:var(--sky); }
    .dot.purple{ background:var(--purple); }

    .listbox{
      border:1px solid var(--line);
      border-radius:12px;
      padding:8px;
      background:#fff;
      max-height:220px;
      overflow:auto;
    }
    .row{
      display:flex; align-items:center; gap:8px;
      padding:6px 4px;
      border-bottom:1px dashed #eee;
    }
    .row:last-child{ border-bottom:none; }
    .row input{ margin:0; }
    .row .meta{ margin-left:auto; font-size:12px; color:var(--muted); }

    .selbar{
      display:flex; gap:8px; flex-wrap:wrap;
      margin-top:8px;
    }
    .mini{
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
      font-weight:700;
      font-size:12px;
    }

    /* ===== ì¤‘ì•™ ìŠ¤ì¼€ì¤„(ê¸°ê°„ ë¦¬ìŠ¤íŠ¸) ===== */
    .center .bd{ padding:0; }
    .calendar{
      padding:12px 14px;
      display:flex; flex-direction:column; gap:10px;
      max-height: calc(100vh - 120px);
      overflow:auto;
    }
    .day-card{
      border:1px solid var(--line);
      border-radius:14px;
      background:#fff;
      overflow:hidden;
      flex-shrink:0;  /* ì¹´ë“œê°€ ì¶•ì†Œë˜ì§€ ì•Šë„ë¡ ë°©ì§€ */
    }
    .day-hd{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-bottom:1px solid #f0f2f6;
      background:#fbfcff;
    }
    .day-hd .leftline{
      display:flex; align-items:center; gap:10px;
      font-weight:900;
    }
    .badge{
      font-size:11px;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      color:#111;
      font-weight:800;
    }
    .badge.holiday{ border-color:#ffd2d8; background:#fff5f6; color:#b00020; }
    .badge.weekend{ border-color:#dbeafe; background:#eff6ff; color:#1d4ed8; }
    .badge.off{ border-color:#d1fae5; background:#ecfdf5; color:#065f46; }
    .badge.disabled{ border-color:#eee; background:#f7f7f7; color:#999; }
    .badge.location{ border-color:#fef3c7; background:#fffbeb; color:#92400e; }

    .day-meta{ font-size:12px; color:var(--muted); display:flex; gap:8px; align-items:center; }
    .day-actions{ display:flex; gap:8px; }
    .btn-sm{
      padding:6px 10px; border-radius:10px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
      font-weight:800;
      font-size:12px;
    }

    /* day list (ë“œë˜ê·¸ ëŒ€ìƒ) */
    .day-list{
      list-style:none;
      margin:0;
      padding:10px 10px 12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      min-height:46px;
    }
    .day-list.disabled{
      background:#fafafa;
      opacity:.65;
      pointer-events:none;
    }

    /* ì—…ì²´ ì¹©(ë“œë˜ê·¸ ì•„ì´í…œ) */
    .company-item{
      border:1px solid var(--line);
      background:#fff;
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      display:flex; align-items:center; gap:8px;
      cursor:grab;
      user-select:none;
      box-shadow:0 1px 2px rgba(0,0,0,.04);
    }
    .company-item:active{ cursor:grabbing; }
    .company-item .sub{ font-size:11px; color:var(--muted); font-weight:700; }
    .company-item .visit-info{ font-size:10px; color:#0284c7; font-weight:700; margin-left:auto; }
    .company-item .x{ margin-left:4px; color:#999; font-weight:900; cursor:pointer; }

    /* ë‚ ì§œ ì¹´ë“œ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
    .day-date{ font-weight:900; }
    .color-dots{ display:flex; gap:3px; margin-left:8px; }
    .day-disabled{ opacity:0.6; }
    .day-disabled .day-hd{ background:#f7f7f7; }

    .slotline{
      padding:0 12px 10px;
      font-size:12px;
      color:var(--muted);
      display:flex; justify-content:space-between;
    }

    /* ===== ìš°ì¸¡ íŒ¨ë„: ë¯¸ë°°ì • / íœ´ë¬´ ë“œë¡­ì¡´ ===== */
    .dropzone{
      border:2px dashed #cfd6e4;
      border-radius:14px;
      padding:12px;
      background:#fbfcff;
    }
    .dropzone .dz-title{
      font-weight:900;
      margin-bottom:6px;
    }
    .dropzone .dz-desc{
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }
    .drop-list{
      list-style:none;
      margin:10px 0 0;
      padding:10px;
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
      min-height:46px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:#111;
      color:#fff;
      padding:10px 12px;
      border-radius:12px;
      font-size:13px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      opacity:0;
      pointer-events:none;
      transition:opacity .2s ease;
      z-index:50;
    }
    .toast.on{ opacity:1; }

    .warn{
      border:1px solid #ffe6a7;
      background:#fff7db;
      padding:10px 12px;
      border-radius:12px;
      font-size:12px;
      color:#6b4e00;
      line-height:1.35;
    }

    .info{
      border:1px solid #bfdbfe;
      background:#eff6ff;
      padding:10px 12px;
      border-radius:12px;
      font-size:12px;
      color:#1e40af;
      line-height:1.35;
    }

    .muted{ color:var(--muted); }
    .small{ font-size:12px; }

    /* ===== Pre-flight ì ê²€ ëª¨ë‹¬ (2026-01-04 ChatGPT + Claude í˜‘ì—…) ===== */
    .preflight-overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.5);
      z-index:100;
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .preflight-overlay.show{ display:flex; }
    .preflight-modal{
      background:#fff;
      border-radius:16px;
      max-width:700px;
      width:100%;
      max-height:85vh;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      box-shadow:0 20px 50px rgba(0,0,0,.2);
    }
    .preflight-header{
      padding:16px 20px;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      gap:12px;
    }
    .preflight-header .icon{
      width:40px; height:40px;
      background:#fef3c7;
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:20px;
    }
    .preflight-header .title{ font-weight:800; font-size:16px; }
    .preflight-header .subtitle{ font-size:13px; color:var(--muted); }
    .preflight-header .close-btn{
      margin-left:auto;
      background:none;
      border:none;
      font-size:24px;
      cursor:pointer;
      color:#999;
      padding:4px;
    }
    .preflight-header .close-btn:hover{ color:#333; }
    .preflight-body{
      padding:16px 20px;
      overflow-y:auto;
      flex:1;
    }
    .preflight-stats{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;
      margin-bottom:16px;
    }
    .preflight-stat{
      border:1px solid var(--line);
      border-radius:12px;
      padding:12px;
      text-align:center;
    }
    .preflight-stat .num{
      font-size:24px;
      font-weight:900;
    }
    .preflight-stat .label{
      font-size:12px;
      color:var(--muted);
      margin-top:4px;
    }
    .preflight-stat.warning{ border-color:#fbbf24; background:#fffbeb; }
    .preflight-stat.warning .num{ color:#d97706; }
    .preflight-actions{
      display:flex;
      gap:10px;
      margin-bottom:16px;
    }
    .preflight-actions .btn{
      flex:1;
      text-align:center;
      padding:12px;
    }
    .preflight-actions .btn.secondary{
      background:#f3f4f6;
      border-color:#e5e7eb;
    }
    .preflight-list{
      border:1px solid var(--line);
      border-radius:12px;
      max-height:250px;
      overflow-y:auto;
    }
    .preflight-item{
      padding:10px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      gap:12px;
    }
    .preflight-item:last-child{ border-bottom:none; }
    .preflight-item .name{
      font-weight:600;
      flex:1;
    }
    .preflight-item .address{
      font-size:12px;
      color:var(--muted);
      flex:2;
    }
    .preflight-item .status{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
    }
    .preflight-item .status.error{
      background:#fee2e2;
      color:#dc2626;
    }
    .preflight-item .status.pending{
      background:#fef3c7;
      color:#d97706;
    }
    .preflight-item .status.success{
      background:#dcfce7;
      color:#16a34a;
    }
    .preflight-footer{
      padding:14px 20px;
      border-top:1px solid var(--line);
      display:flex;
      justify-content:flex-end;
      gap:10px;
      background:#fafafa;
    }
    .preflight-progress{
      margin:12px 0;
      display:none;
    }
    .preflight-progress.show{ display:block; }
    .preflight-progress .bar{
      height:8px;
      background:#e5e7eb;
      border-radius:999px;
      overflow:hidden;
    }
    .preflight-progress .fill{
      height:100%;
      background:#2563eb;
      border-radius:999px;
      transition:width .3s;
    }
    .preflight-progress .text{
      font-size:12px;
      color:var(--muted);
      margin-top:6px;
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <button class="back-btn" onclick="location.href='employee-dashboard.html'">&larr;</button>
      <div class="brand">ë‚¨ê²½ìŠ¤í‹¸ Â· ì—…ì²´ ë°©ë¬¸ ìŠ¤ì¼€ì¤„ ìƒì„±</div>
      <div id="saveStatePill" class="pill" style="display:none;">ì €ì¥ í•„ìš”</div>
      <div class="spacer"></div>
      <button id="btnPreview" class="btn primary">ìŠ¤ì¼€ì¤„ ìƒì„±</button>
      <button id="btnSave" class="btn primary">ì €ì¥</button>
      <button id="btnReset" class="btn danger">ì´ˆê¸°í™”</button>
    </div>
  </div>

  <!-- ===== Pre-flight ì ê²€ ëª¨ë‹¬ (2026-01-04 ChatGPT + Claude í˜‘ì—…) ===== -->
  <div id="preflightOverlay" class="preflight-overlay">
    <div class="preflight-modal">
      <div class="preflight-header">
        <div class="icon">âš ï¸</div>
        <div>
          <div class="title">ìŠ¤ì¼€ì¤„ ìƒì„± ì „ ì ê²€</div>
          <div class="subtitle">ì¢Œí‘œ ë¯¸ë“±ë¡ ì—…ì²´ê°€ ìˆìŠµë‹ˆë‹¤</div>
        </div>
        <button class="close-btn" id="preflightClose">&times;</button>
      </div>
      <div class="preflight-body">
        <div class="preflight-stats">
          <div class="preflight-stat">
            <div class="num" id="pfTotal">0</div>
            <div class="label">ì „ì²´ ì—…ì²´</div>
          </div>
          <div class="preflight-stat">
            <div class="num" id="pfReady">0</div>
            <div class="label">ì¢Œí‘œ ì™„ë£Œ</div>
          </div>
          <div class="preflight-stat warning">
            <div class="num" id="pfPending">0</div>
            <div class="label">ì¢Œí‘œ ë¯¸ë“±ë¡</div>
          </div>
        </div>

        <div class="preflight-actions">
          <button class="btn secondary" id="pfRetryGeocode">
            ğŸ”„ ìë™ ì§€ì˜¤ì½”ë”© ì¬ì‹œë„
          </button>
          <button class="btn secondary" id="pfRefresh">
            ğŸ”ƒ ìƒˆë¡œê³ ì¹¨
          </button>
        </div>

        <div class="preflight-progress" id="pfProgress">
          <div class="bar"><div class="fill" id="pfProgressFill" style="width:0%"></div></div>
          <div class="text" id="pfProgressText">ì²˜ë¦¬ ì¤‘...</div>
        </div>

        <div style="font-size:13px; margin-bottom:10px; color:var(--muted);">
          <b>ì¢Œí‘œ ë¯¸ë“±ë¡ ì—…ì²´ ëª©ë¡</b> (ì£¼ì†Œ ì˜¤ë¥˜ ë˜ëŠ” ë¹ˆì¹¸)
        </div>
        <div class="preflight-list" id="pfList">
          <!-- ì—…ì²´ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
        </div>
      </div>
      <div class="preflight-footer">
        <button class="btn" id="pfSkip">ì œì™¸í•˜ê³  ìƒì„±</button>
        <button class="btn primary" id="pfGenerate" disabled>ìŠ¤ì¼€ì¤„ ìƒì„±</button>
      </div>
    </div>
  </div>

  <div class="app">
    <!-- ===== ì¢Œì¸¡ íŒ¨ë„: ì¡°ê±´/í•„í„° ===== -->
    <section class="panel left">
      <div class="hd">
        <div class="title">ì¡°ê±´/í•„í„°</div>
        <div class="muted small" id="loadState">ë¡œë”©...</div>
      </div>
      <div class="bd">
        <div class="section">
          <div class="grid2">
            <div>
              <label>ì‹œì‘ì¼</label>
              <input type="date" id="startDate" />
            </div>
            <div>
              <label>ì¢…ë£Œì¼</label>
              <input type="date" id="endDate" />
            </div>
          </div>
          <div style="margin-top:10px;" class="kpi">
            <div class="box">
              <div class="k">ê·¼ë¬´ì¼(ì£¼ë§/ê³µíœ´ì¼ ì œì™¸)</div>
              <div class="v" id="workdayCount">-</div>
            </div>
            <div class="box">
              <div class="k">ì„ íƒ ì—…ì²´ ìˆ˜</div>
              <div class="v" id="selectedCount">0</div>
            </div>
          </div>
          <div style="margin-top:10px;" class="hint" id="rangeHint">
            ê¸°ê°„ì„ ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ ì£¼ë§/ê³µíœ´ì¼ì„ ì œì™¸í•˜ì—¬ ê·¼ë¬´ì¼ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
          </div>
        </div>

        <div class="section">
          <label>í•˜ë£¨ ë°©ë¬¸ ì—…ì²´ ìˆ˜ ì˜µì…˜</label>
          <div class="listbox" style="max-height:none;">
            <div class="row">
              <input type="radio" name="cap" value="1-3" checked />
              <div><b>1~3ê°œ</b> <span class="muted small">(ëª©í‘œ 2)</span></div>
            </div>
            <div class="row">
              <input type="radio" name="cap" value="4-5" />
              <div><b>4~5ê°œ</b> <span class="muted small">(ëª©í‘œ 5)</span></div>
            </div>
            <div class="row">
              <input type="radio" name="cap" value="6-8" />
              <div><b>6~8ê°œ</b> <span class="muted small">(ëª©í‘œ 7)</span></div>
            </div>
            <div class="row">
              <input type="radio" name="cap" value="9-11" />
              <div><b>9~11ê°œ</b> <span class="muted small">(ëª©í‘œ 10)</span></div>
            </div>
          </div>
        </div>

        <div class="section">
          <label>ê²½ë¡œ ì•Œê³ ë¦¬ì¦˜ ì„ íƒ</label>
          <div class="listbox" style="max-height:none;">
            <div class="row">
              <input type="radio" name="algorithm" value="basic" checked />
              <div><b>ê¸°ë³¸</b> <span class="muted small">(ì§€ì—­ ê·¸ë£¹í•‘)</span></div>
            </div>
            <div class="row">
              <input type="radio" name="algorithm" value="optimal" />
              <div><b>ìµœì  ê²½ë¡œ</b> <span class="muted small">(ì¹´ì¹´ì˜¤ë§µ ê±°ë¦¬ ê¸°ë°˜)</span></div>
            </div>
          </div>
          <div class="hint" style="margin-top:8px;">
            <b>ìµœì  ê²½ë¡œ</b>: í•œêµ­ ì£¼ì†Œ ì¸ì‹ë¥  ë†’ì€ ì¹´ì¹´ì˜¤ë§µ API ì‚¬ìš©, ì—…ì²´ ìˆœì„œëŒ€ë¡œ 1â†’2â†’3â†’... ê°€ì¥ ê°€ê¹Œìš´ ê³³ìœ¼ë¡œ ì´ë™ (ì‹œê°„ ì†Œìš”)
          </div>
        </div>

        <div class="section" id="apiKeySection" style="display:none;">
          <label>ì¹´ì¹´ì˜¤ REST API í‚¤</label>
          <input type="password" id="kakaoApiKey" placeholder="ì¹´ì¹´ì˜¤ REST API í‚¤ ì…ë ¥ (ì„ íƒì‚¬í•­)" />
          <div class="hint" style="margin-top:8px;">
            API í‚¤ ì—†ìœ¼ë©´ ì§ì„ ê±°ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.<br/>
            <a href="https://developers.kakao.com/console/app" target="_blank" style="color:#2563eb;">ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†”ì—ì„œ ë°œê¸‰</a>
          </div>
        </div>

        <!-- ì¢Œí‘œ ê´€ë¦¬ ì„¹ì…˜ (2026-01-04 ì¶”ê°€) -->
        <div class="section" id="geocodeSection">
          <label>ğŸ“ ì—…ì²´ ì¢Œí‘œ ê´€ë¦¬</label>
          <div class="info" id="geocodeStats" style="margin-bottom:10px;">
            ì¢Œí‘œ í†µê³„ ë¡œë”© ì¤‘...
          </div>
          <div class="selbar">
            <button class="mini" id="btnBatchGeocode" style="background:#2563eb;color:#fff;">
              ì¼ê´„ ì§€ì˜¤ì½”ë”© ì‹¤í–‰
            </button>
            <button class="mini" id="btnRefreshGeoStats">í†µê³„ ìƒˆë¡œê³ ì¹¨</button>
          </div>
          <div id="geocodeProgress" style="display:none;margin-top:10px;">
            <div style="background:#e5e7eb;border-radius:8px;overflow:hidden;">
              <div id="geocodeProgressBar" style="background:#2563eb;height:8px;width:0%;transition:width 0.3s;"></div>
            </div>
            <div id="geocodeProgressText" class="hint" style="margin-top:6px;"></div>
          </div>
          <div class="hint" style="margin-top:8px;">
            ì¹´ì¹´ì˜¤ë§µ APIë¡œ ì£¼ì†Œâ†’ì¢Œí‘œ ë³€í™˜ í›„ Supabaseì— ì €ì¥í•©ë‹ˆë‹¤.<br/>
            ì¢Œí‘œê°€ ìˆì–´ì•¼ "ê°€ì¥ ê°€ê¹Œìš´ ì—…ì²´" ê²½ë¡œ ìµœì í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
          </div>
        </div>

        <div class="section">
          <label>ìƒ‰ìƒ í•„í„° (ë©€í‹°)</label>
          <div class="chiprow" id="colorChips"></div>
        </div>

        <div class="section">
          <label>ì§€ì—­ í•„í„° (ë©€í‹°)</label>
          <div class="listbox" id="regionList"></div>
          <div class="selbar">
            <button class="mini" id="btnRegionAll">ì „ì²´ ì„ íƒ</button>
            <button class="mini" id="btnRegionNone">ì „ì²´ í•´ì œ</button>
          </div>
        </div>

        <div class="section">
          <label>ì—…ì²´ ê²€ìƒ‰/ì„ íƒ</label>
          <input type="text" id="companySearch" placeholder="ì—…ì²´ëª… ê²€ìƒ‰ (ì˜ˆ: ë‚¨ê²½, ì² ê°•, OOìƒì‚¬)" />
          <div class="selbar">
            <button class="mini" id="btnSelectAllFiltered">í•„í„° ê²°ê³¼ ì „ì²´ ì„ íƒ</button>
            <button class="mini" id="btnClearSelected">ì„ íƒ ì—…ì²´ ë¹„ìš°ê¸°</button>
          </div>
          <div class="hint" style="margin-top:8px;">
            "ì„ íƒ ì—…ì²´ ìˆ˜"ê°€ 0ì´ë©´, ë¯¸ë¦¬ë³´ê¸° ìƒì„± ì‹œ "í˜„ì¬ í•„í„° ê²°ê³¼ ì „ì²´"ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
          </div>
        </div>

        <div class="section">
          <div class="info" id="locationGroupInfo">
            <b>ìŠ¤ì¼€ì¤„ ìë™ ìƒì„± ì•Œê³ ë¦¬ì¦˜</b><br/>
            â‘  <b style="color:#dc2626;">ë¹¨ê°•</b> â†’ <b style="color:#ea580c;">ì£¼í™©</b> â†’ <b style="color:#ca8a04;">ë…¸ë‘</b> â†’ <b style="color:#2e7d32;">ë…¹ìƒ‰</b> â†’ <b style="color:#0284c7;">í•˜ëŠ˜</b> â†’ <b style="color:#2563eb;">íŒŒë‘</b> â†’ <b style="color:#7c3aed;">ë³´ë¼</b> â†’ <b style="color:#6b7280;">íšŒìƒ‰</b> ìˆœì„œ<br/>
            â‘¡ ë°©ë¬¸ ê¸°ë¡ ì—†ê±°ë‚˜ ì˜¤ë˜ëœ ì—…ì²´ ìš°ì„ <br/>
            â‘¢ ë°©ë¬¸ íšŸìˆ˜ ì ì€ ì—…ì²´ ìš°ì„ 
          </div>
        </div>

        <div class="section">
          <div class="warn" id="estimateBox">
            ê¸°ê°„/í•„í„°ë¥¼ ì„¤ì •í•˜ë©´ "í•„ìš” ì¼ìˆ˜ ì¶”ì •"ì´ í‘œì‹œë©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </section>

    <!-- ===== ì¤‘ì•™ íŒ¨ë„: ìŠ¤ì¼€ì¤„(ê¸°ê°„ ë¦¬ìŠ¤íŠ¸) ===== -->
    <section class="panel center">
      <div class="hd">
        <div class="title">ìŠ¤ì¼€ì¤„ (ê¸°ê°„ ë¦¬ìŠ¤íŠ¸)</div>
        <div class="muted small" id="calendarMeta">-</div>
      </div>
      <div class="bd">
        <div class="calendar" id="calendar">
          <div class="hint">ì¢Œì¸¡ì—ì„œ ì¡°ê±´ ì„¤ì • â†’ "ë¯¸ë¦¬ë³´ê¸° ìƒì„±"ì„ ëˆ„ë¥´ì„¸ìš”.</div>
        </div>
      </div>
    </section>

    <!-- ===== ìš°ì¸¡ íŒ¨ë„: íœ´ë¬´ ë“œë¡­ì¡´ / ë¯¸ë°°ì • í’€ ===== -->
    <section class="panel right">
      <div class="hd">
        <div class="title">í¸ì§‘ ë„êµ¬</div>
        <div class="muted small" id="editMeta">ë“œë˜ê·¸ë¡œ ì¡°ì •</div>
      </div>
      <div class="bd">
        <div class="dropzone">
          <div class="dz-title">íœ´ë¬´ ì§€ì • ë“œë¡­ì¡´</div>
          <div class="dz-desc">
            ë‚ ì§œ ì¹´ë“œì—ì„œ ì—…ì²´ í•˜ë‚˜ë¥¼ ì—¬ê¸°ë¡œ ë“œë¡­í•˜ë©´<br/>
            <b>ê·¸ ë‚ ì§œë¥¼ "íœ´ë¬´"ë¡œ ì§€ì •</b>í•˜ê³ , í•´ë‹¹ ë‚ ì§œì˜ ëª¨ë“  ì—…ì²´ë¥¼ ë¯¸ë°°ì •ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
          </div>
          <ul class="drop-list" id="offDropList" aria-label="íœ´ë¬´ ë“œë¡­ì¡´"></ul>
        </div>

        <div class="section"></div>

        <div class="dropzone" style="margin-top:12px;">
          <div class="dz-title">ë¯¸ë°°ì • ì—…ì²´</div>
          <div class="dz-desc">ê¸°ê°„ ë¶€ì¡±/íœ´ë¬´ ì§€ì •/ìˆ˜ë™ ì´ë™ìœ¼ë¡œ ë‚¨ì€ ì—…ì²´ë“¤ì´ ì—¬ê¸°ì— ëª¨ì…ë‹ˆë‹¤.</div>
          <ul class="drop-list" id="unassignedList" aria-label="ë¯¸ë°°ì • ë¦¬ìŠ¤íŠ¸"></ul>
        </div>

        <div class="section" style="margin-top:12px;">
          <div class="hint">
            íŒ) ë¯¸ë°°ì • â†’ ë‚ ì§œë¡œ ë“œë˜ê·¸í•˜ë©´ ë°°ì •ë©ë‹ˆë‹¤. ë‚ ì§œ ë‚´ì—ì„œë„ ìˆœì„œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </section>
  </div>

  <div id="toast" class="toast">-</div>

  <!-- ì¸ì¦ ë° ë°ì´í„°ë² ì´ìŠ¤ ë¡œë“œ -->
  <!-- â˜… ChatGPT ë¦¬ë·°: ìºì‹œ ë²„ìŠ¤íŒ… - ë²„ì „ í˜•ì‹ ë³€ê²½ (20260104b - UTC ì‹œê°„ëŒ€ ë²„ê·¸ ìˆ˜ì •) -->
  <script src="shared-assets/js/auth.js?v=20260104d"></script>
  <script src="database.js?v=20260104d"></script>
  <script src="route-optimizer.js?v=20260104k"></script>
  <script src="schedule-generator.js?v=20260104p"></script>
</body>
</html>
