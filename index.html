<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title id="pageTitle">ë‚¨ê²½ìŠ¤í‹¸(ì£¼) - ìµœê³ ì˜ í’ˆì§ˆ, ìµœìƒì˜ ì„œë¹„ìŠ¤</title>
  <meta name="description" content="ëŒ€í•œë¯¼êµ­ ìµœê³ ì˜ ì² ê°• ì „ë¬¸ ê¸°ì—…">
  <meta name="keywords" content="ì² ê°•, ìŠ¤í‹¸, ê°•ì² , ì œì¡°ì—…">

  <!-- Favicons -->
  <link href="logo.jpg" rel="icon">
  <link href="logo.jpg" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Supabase JS CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <style>
    /* ì¸ì¦ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .auth-form .form-group {
      margin-bottom: 20px;
    }
    
    .auth-form label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #333;
    }
    
    .auth-form input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
      box-sizing: border-box;
    }
    
    .auth-form input:focus {
      outline: none;
      border-color: #0066cc;
      box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
    }
    
    .btn-primary {
      width: 100%;
      padding: 12px;
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.3s;
      margin: 20px 0 15px 0;
    }
    
    .btn-primary:hover {
      background: #0052a3;
    }
    
    .btn-google {
      width: 100%;
      padding: 12px 20px;
      border: 1px solid #dadce0;
      border-radius: 8px;
      background: white;
      color: #3c4043;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 10px 0 20px 0;
      font-size: 16px;
      transition: all 0.3s;
    }
    
    .btn-google:hover {
      background: #f8f9fa;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .btn-kakao {
      width: 100%;
      padding: 12px 20px;
      border: 1px solid #FEE500;
      border-radius: 8px;
      background: #FEE500;
      color: #3C1E1E;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 10px 0 20px 0;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s;
    }

    .btn-kakao:hover {
      background: #FDD835;
      border-color: #FDD835;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .divider {
      text-align: center;
      margin: 25px 0;
      position: relative;
    }
    
    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #ddd;
    }
    
    .divider span {
      background: white;
      padding: 0 15px;
      color: #666;
      font-size: 14px;
    }
    
    .auth-switch {
      text-align: center;
      margin-top: 20px;
      color: #666;
    }
    
    .auth-switch a {
      color: #0066cc;
      text-decoration: none;
      font-weight: 500;
    }
    
    .auth-switch a:hover {
      text-decoration: underline;
    }
    
    .status-message {
      margin-top: 15px;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
    }
    
    .status-success {
      background: #e8f5e8;
      color: #2e7d32;
      border: 1px solid #4caf50;
    }
    
    .status-error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #f44336;
    }
    
    .status-info {
      background: #e3f2fd;
      color: #1565c0;
      border: 1px solid #2196f3;
    }
    
    /* ë¡œê·¸ì¸ í›„ ì‚¬ìš©ì í”„ë¡œí•„ ì˜ì—­ */
    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    
    .user-profile:hover {
      background: rgba(0, 102, 204, 0.1);
    }
    
    .user-profile img {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .user-profile .profile-name {
      font-weight: 500;
      color: #333;
    }
  </style>

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
  
  <style>
    body { 
      font-family: 'Noto Sans KR', sans-serif !important; 
      background-color: #ffffff !important;
    }
    
    /* ë©”ì¸ ì„­ì…˜ê³¼ í‘¸í„° ì‚¬ì´ ê³µê°„ ì¶”ê°€ */
    .main {
      margin-bottom: 0 !important;
    }
    
    
    /* ğŸ¯ HERO SECTION STYLES - ë°ì€ ìƒë‹¨, ì–´ë‘ìš´ í•˜ë‹¨ ëŒ€ë¹„ */
    #hero {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
      background-image: none !important;
      color: #2c3e50 !important;
    }
    
    #heroImagePlaceholder {
      background: linear-gradient(135deg, #0066cc, #004499) !important;
      opacity: 1 !important;
      border-radius: 15px !important;
      box-shadow: 0 10px 30px rgba(0, 102, 204, 0.2) !important;
    }
    
    .hero .highlight {
      color: #0066cc !important;
      background: linear-gradient(45deg, #0066cc, #004499);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .hero h1 {
      color: #1a365d !important;
      font-weight: 700 !important;
    }
    
    .hero .lead {
      color: #4a5568 !important;
    }
    
    .hero-features li {
      color: #2c3e50 !important;
    }
    
    .hero-features i {
      color: #0066cc !important;
    }
    
    .hero-tag {
      background: linear-gradient(45deg, #0066cc, #004499) !important;
      color: white !important;
      border-radius: 25px !important;
      padding: 8px 16px !important;
    }
  </style>
  

  <!-- Font Awesome for icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <!-- ê³µí†µ ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ -->
  <link href="includes/common-styles.css" rel="stylesheet">
</head>

<body class="index-page">


  <main class="main">

    <!-- Hero Section -->
    <section id="hero" class="hero section" style="padding: 120px 0; position: relative; overflow: hidden;">
      <div class="container" data-aos="fade-up">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <div class="hero-content" data-aos="fade-up" data-aos-delay="100">
              <div class="hero-tag">
                <i class="bi bi-gear-fill"></i>
                <span id="heroTag">ì² ê°• ì‚°ì—…ì˜ ë¦¬ë”</span>
              </div>
              <h1 id="heroTitle">ìµœê³ ì˜ <span class="highlight">í’ˆì§ˆ</span>ê³¼ <span class="highlight">ê¸°ìˆ ë ¥</span>ìœ¼ë¡œ ë¯¸ë˜ë¥¼ ë§Œë“­ë‹ˆë‹¤</h1>
              <p class="lead" id="heroDescription">12ë…„ ì „í†µì˜ ê¸°ìˆ ë ¥ê³¼ í˜ì‹ ìœ¼ë¡œ ëŒ€í•œë¯¼êµ­ ì² ê°• ì‚°ì—…ì„ ì„ ë„í•˜ëŠ”<br><span style="color: #0052a3; font-size: 1.3em; font-weight: bold;">ë‚¨ê²½ìŠ¤í‹¸(ì£¼)</span>ì…ë‹ˆë‹¤.</p>
              <ul class="hero-features">
                <li><i class="bi bi-check-circle"></i> <span>ISO 9001 í’ˆì§ˆê²½ì˜ì‹œìŠ¤í…œ ì¸ì¦</span></li>
                <li><i class="bi bi-check-circle"></i> <span>ì—°ê°„ 10ë§Œí†¤ ìƒì‚° ëŠ¥ë ¥</span></li>
                <li><i class="bi bi-check-circle"></i> <span>24ì‹œê°„ ê³ ê° ê¸°ìˆ ì§€ì›</span></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="hero-image" data-aos="zoom-out" data-aos-delay="200">
              <div id="heroImagePlaceholder" class="image-placeholder" style="border: none; padding: 0; text-align: center; height: 500px; display: flex; align-items: center; justify-content: center; background: #000000; overflow: hidden; border-radius: 10px;">
                <img src="namkyung.png" 
                     style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" 
                     alt="Scout íˆì–´ë¡œ ì´ë¯¸ì§€">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section><!-- /Hero Section -->

  </main>


  <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ -->
  <div id="authModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="authModalTitle">ë¡œê·¸ì¸</h2>
        <button class="close-btn" onclick="closeAuthModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <!-- ë¡œê·¸ì¸ í¼ -->
        <div id="loginForm" class="auth-form">
          <div class="form-group">
            <label>ì´ë©”ì¼</label>
            <input type="email" id="loginEmail" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" required>
          </div>
          
          <div class="form-group">
            <label>ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
          </div>
          
          <button type="button" onclick="handleEmailLogin()" class="btn-primary">ë¡œê·¸ì¸</button>
          
          <!-- êµ¬ë¶„ì„  -->
          <div class="divider">
            <span>ë˜ëŠ”</span>
          </div>
          
          <!-- Google ë¡œê·¸ì¸ -->
          <button type="button" onclick="handleGoogleLogin()" class="btn-google">
            <svg width="18" height="18" viewBox="0 0 18 18">
              <g fill="none" fill-rule="evenodd">
                <path d="M17.64 9.205c0-.639-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z" fill="#4285F4"/>
                <path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z" fill="#34A853"/>
                <path d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                <path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/>
              </g>
            </svg>
            Googleë¡œ ë¡œê·¸ì¸
          </button>

          <!-- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ -->
          <button type="button" onclick="handleKakaoLogin()" class="btn-kakao">
            <svg width="18" height="18" viewBox="0 0 18 18">
              <g fill="none" fill-rule="evenodd">
                <path d="M9 0C4.03 0 0 3.13 0 7c0 2.52 1.67 4.74 4.19 6.04L3.5 16.5c-.13.47.35.85.76.6l3.92-2.65c.28.02.55.05.82.05 4.97 0 9-3.13 9-7S13.97 0 9 0z" fill="#3C1E1E"/>
              </g>
            </svg>
            ì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸
          </button>
          
          <div class="auth-switch">
            ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="#" onclick="showRegisterForm()">íšŒì›ê°€ì…</a>
          </div>
        </div>
        
        <!-- íšŒì›ê°€ì… í¼ -->
        <div id="registerForm" class="auth-form" style="display: none;">
          <div class="form-group">
            <label>ì´ë¦„</label>
            <input type="text" id="registerName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
          </div>
          
          <div class="form-group">
            <label>ì´ë©”ì¼</label>
            <input type="email" id="registerEmail" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" required>
          </div>
          
          <div class="form-group">
            <label>ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" id="registerPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 6ì)" required minlength="6">
          </div>
          
          <div class="form-group">
            <label>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
            <input type="password" id="confirmPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”" required>
          </div>
          
          <div class="form-group">
            <label>ë¶€ì„œ (ì„ íƒì‚¬í•­)</label>
            <input type="text" id="registerDepartment" placeholder="ë¶€ì„œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          
          <div class="form-group">
            <label>ì§ì±… (ì„ íƒì‚¬í•­)</label>
            <input type="text" id="registerPosition" placeholder="ì§ì±…ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          
          <button type="button" onclick="handleRegister()" class="btn-primary">íšŒì›ê°€ì…</button>
          
          <div class="auth-switch">
            ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <a href="#" onclick="showLoginForm()">ë¡œê·¸ì¸</a>
          </div>
        </div>
        
        <div id="authStatus" class="status-message" style="display: none;"></div>
      </div>
    </div>
  </div>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@srexi/purecounterjs/dist/purecounter_vanilla.js"></script>
  <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>

  <!-- Supabase ë° ë¡œê·¸ì¸ ê¸°ëŠ¥ -->
  <script>
    // Supabase ì„¤ì •
    const SUPABASE_URL = 'https://zgyawfmjconubxaiamod.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpneWF3Zm1qY29udWJ4YWlhbW9kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3NjQzNzIsImV4cCI6MjA2NzM0MDM3Mn0.shjBE2OQeILwkLLi4E6Bq0-b6YPUs-WFwquexdUiM9A';
    
    // Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
    let supabaseClient = null;
    
    try {
      supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
        auth: {
          persistSession: true,
          detectSessionInUrl: true,
          autoRefreshToken: true
        }
      });
      console.log('âœ… Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ');
    } catch (error) {
      console.error('âŒ Supabase ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
    }
    
    // ìƒíƒœ í‘œì‹œ í•¨ìˆ˜
    function showStatus(message, type = 'info') {
      const status = document.getElementById('authStatus');
      status.style.display = 'block';
      status.className = `status-message status-${type}`;
      status.textContent = message;
      
      console.log(`${type.toUpperCase()}: ${message}`);
    }
    
    // ì¸ì¦ ëª¨ë‹¬ ì—´ê¸° (ë¡œê·¸ì¸ í¼)
    function showLoginModal() {
      console.log('ğŸ” ë¡œê·¸ì¸ ëª¨ë‹¬ ì—´ê¸°');
      document.getElementById('authModal').style.display = 'flex';
      showLoginForm();
    }
    
    // ì¸ì¦ ëª¨ë‹¬ ë‹«ê¸°
    function closeAuthModal() {
      console.log('âŒ ì¸ì¦ ëª¨ë‹¬ ë‹«ê¸°');
      document.getElementById('authModal').style.display = 'none';
      // í¼ ì´ˆê¸°í™”
      clearAuthForms();
    }
    
    // ë¡œê·¸ì¸ í¼ í‘œì‹œ
    function showLoginForm() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('registerForm').style.display = 'none';
      document.getElementById('authModalTitle').textContent = 'ë¡œê·¸ì¸';
      document.getElementById('authStatus').style.display = 'none';
    }
    
    // íšŒì›ê°€ì… í¼ í‘œì‹œ
    function showRegisterForm() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('registerForm').style.display = 'block';
      document.getElementById('authModalTitle').textContent = 'íšŒì›ê°€ì…';
      document.getElementById('authStatus').style.display = 'none';
    }
    
    // í¼ ì´ˆê¸°í™”
    function clearAuthForms() {
      // ë¡œê·¸ì¸ í¼ ì´ˆê¸°í™”
      document.getElementById('loginEmail').value = '';
      document.getElementById('loginPassword').value = '';
      
      // íšŒì›ê°€ì… í¼ ì´ˆê¸°í™”
      document.getElementById('registerName').value = '';
      document.getElementById('registerEmail').value = '';
      document.getElementById('registerPassword').value = '';
      document.getElementById('confirmPassword').value = '';
      document.getElementById('registerDepartment').value = '';
      document.getElementById('registerPosition').value = '';
      
      // ìƒíƒœ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
      document.getElementById('authStatus').style.display = 'none';
    }
    
    // ì´ë©”ì¼ ë¡œê·¸ì¸
    async function handleEmailLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showStatus('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.', 'error');
        return;
      }
      
      showStatus('ë¡œê·¸ì¸ ì¤‘...', 'info');
      
      try {
        const { data, error } = await supabaseClient.auth.signInWithPassword({
          email: email,
          password: password
        });
        
        if (error) {
          showStatus('ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + error.message, 'error');
        } else {
          showStatus('ë¡œê·¸ì¸ ì„±ê³µ!', 'success');
          console.log('ì‚¬ìš©ì ì •ë³´:', data.user);
          
          // ì‚¬ìš©ì ì •ë³´ ì €ì¥ ë° UI ì—…ë°ì´íŠ¸
          const user = {
            id: data.user.id,
            email: data.user.email,
            name: data.user.user_metadata?.name || data.user.email,
            profileImage: data.user.user_metadata?.avatar_url,
            provider: 'email'
          };
          
          saveUserAndUpdateUI(user);
          closeAuthModal();
          
          // employee-dashboardë¡œ ì´ë™
          setTimeout(() => {
            window.location.href = 'employee-dashboard.html';
          }, 1000);
        }
      } catch (error) {
        showStatus('ë¡œê·¸ì¸ ì˜¤ë¥˜: ' + error.message, 'error');
      }
    }
    
    // íšŒì›ê°€ì…
    async function handleRegister() {
      const name = document.getElementById('registerName').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const department = document.getElementById('registerDepartment').value;
      const position = document.getElementById('registerPosition').value;
      
      // ìœ íš¨ì„± ê²€ì‚¬
      if (!name || !email || !password) {
        showStatus('ì´ë¦„, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.', 'error');
        return;
      }
      
      if (password !== confirmPassword) {
        showStatus('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
        return;
      }
      
      if (password.length < 6) {
        showStatus('ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.', 'error');
        return;
      }
      
      showStatus('íšŒì›ê°€ì… ì¤‘...', 'info');
      
      try {
        const { data, error } = await supabaseClient.auth.signUp({
          email: email,
          password: password,
          options: {
            data: {
              name: name,
              department: department,
              position: position,
              company_domain: 'namkyungsteel.com',
              company_name: 'ë‚¨ê²½ìŠ¤í‹¸(ì£¼)'
            }
          }
        });
        
        if (error) {
          showStatus('íšŒì›ê°€ì… ì‹¤íŒ¨: ' + error.message, 'error');
        } else {
          console.log('Supabase Auth íšŒì›ê°€ì… ì„±ê³µ:', data);
          
          // ì»¤ìŠ¤í…€ users í…Œì´ë¸”ì—ë„ ì‚¬ìš©ì ì •ë³´ ì €ì¥
          try {
            if (data.user) {
              const { data: insertData, error: insertError } = await supabaseClient
                .from('users')
                .insert([
                  {
                    id: data.user.id,
                    email: email,
                    name: name,
                    department: department || '',
                    position: position || '',
                    company_domain: 'namkyungsteel.com',
                    company_name: 'ë‚¨ê²½ìŠ¤í‹¸(ì£¼)',
                    role: 'employee',
                    created_at: new Date().toISOString()
                  }
                ]);
              
              if (insertError) {
                console.error('âŒ users í…Œì´ë¸” ì €ì¥ ì˜¤ë¥˜:', insertError);
                showStatus('íšŒì›ê°€ì…ì€ ì„±ê³µí–ˆì§€ë§Œ ì‚¬ìš©ì ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
              } else {
                console.log('âœ… users í…Œì´ë¸”ì— ì‚¬ìš©ì ì •ë³´ ì €ì¥ ì™„ë£Œ:', insertData);
                showStatus('íšŒì›ê°€ì… ì„±ê³µ! ì´ë©”ì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.', 'success');
              }
            }
          } catch (tableError) {
            console.error('âŒ users í…Œì´ë¸” ì €ì¥ ì˜ˆì™¸:', tableError);
          }
          
          // ìë™ ë¡œê·¸ì¸ì´ ë˜ì—ˆë‹¤ë©´ UI ì—…ë°ì´íŠ¸
          if (data.user && data.session) {
            const user = {
              id: data.user.id,
              email: data.user.email,
              name: name,
              department: department,
              position: position,
              provider: 'email'
            };
            
            saveUserAndUpdateUI(user);
            closeAuthModal();
            
            // employee-dashboardë¡œ ì´ë™
            setTimeout(() => {
              window.location.href = 'employee-dashboard.html';
            }, 1000);
          }
        }
      } catch (error) {
        showStatus('íšŒì›ê°€ì… ì˜¤ë¥˜: ' + error.message, 'error');
      }
    }
    
    // ì‚¬ìš©ì ì •ë³´ ì €ì¥ ë° UI ì—…ë°ì´íŠ¸
    function saveUserAndUpdateUI(user) {
      // sessionStorageì— ì‚¬ìš©ì ì •ë³´ ì €ì¥ (ë¸Œë¼ìš°ì € ì„¸ì…˜ ë™ì•ˆë§Œ ìœ ì§€)
      sessionStorage.setItem('currentUser', JSON.stringify(user));
      sessionStorage.setItem('userRole', user.role || 'employee');
      sessionStorage.setItem('userName', user.name);
      
      // ë„¤ë¹„ë°” ìƒíƒœ ì—…ë°ì´íŠ¸ (ê³µí†µ ì»´í¬ë„ŒíŠ¸) - ì—¬ëŸ¬ ì‹œì ì—ì„œ ì‹œë„
      function tryUpdateNavbar() {
        if (window.updateNavbarLoginState) {
          console.log('ğŸ”„ index.html: ë„¤ë¹„ë°” ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤í–‰');
          window.updateNavbarLoginState();
        } else {
          console.warn('âš ï¸ index.html: updateNavbarLoginState í•¨ìˆ˜ ì—†ìŒ');
        }
      }
      
      setTimeout(tryUpdateNavbar, 100);
      setTimeout(tryUpdateNavbar, 300);
      setTimeout(tryUpdateNavbar, 500);
      setTimeout(tryUpdateNavbar, 1000);
      
      console.log('âœ… ì‚¬ìš©ì ì •ë³´ ì €ì¥ ë° ë„¤ë¹„ë°” ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', user);
    }
    
    // ë¡œê·¸ì¸ëœ ì‚¬ìš©ììš© UI ì—…ë°ì´íŠ¸
    function updateUIForLoggedInUser(user) {
      const loginBtn = document.getElementById('mainLoginBtn');
      const userProfile = document.getElementById('userProfile');
      
      if (loginBtn && userProfile) {
        // ë¡œê·¸ì¸ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
        loginBtn.style.display = 'none';
        
        // ì‚¬ìš©ì í”„ë¡œí•„ í‘œì‹œ
        userProfile.style.display = 'flex';
        
        // í”„ë¡œí•„ ì´ë¯¸ì§€ ì„¤ì •
        const profileImage = document.getElementById('profileImage');
        if (user.profileImage) {
          profileImage.src = user.profileImage;
        }
        
        // ì‚¬ìš©ì ì´ë¦„ ì„¤ì •
        const profileName = document.getElementById('profileName');
        if (profileName) {
          profileName.textContent = user.name;
        }
      }
    }
    
    // ë¡œê·¸ì•„ì›ƒëœ ìƒíƒœìš© UI ì—…ë°ì´íŠ¸
    function updateUIForLoggedOutUser() {
      const loginBtn = document.getElementById('mainLoginBtn');
      const userProfile = document.getElementById('userProfile');
      
      if (loginBtn && userProfile) {
        // ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ
        loginBtn.style.display = 'flex';
        
        // ì‚¬ìš©ì í”„ë¡œí•„ ìˆ¨ê¸°ê¸°
        userProfile.style.display = 'none';
      }
    }
    
    // ë¡œê·¸ì•„ì›ƒ
    function logout() {
      sessionStorage.removeItem('currentUser');
      sessionStorage.removeItem('userRole');
      sessionStorage.removeItem('userName');
      
      // ë„¤ë¹„ë°” ìƒíƒœ ì—…ë°ì´íŠ¸ (ê³µí†µ ì»´í¬ë„ŒíŠ¸)
      if (window.updateNavbarLoginState) {
        window.updateNavbarLoginState();
      }
      
      console.log('ğŸšª ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ');
      
      // í”„ë¡œí•„ ëª¨ë‹¬ ë‹«ê¸°
      hideProfileModal();
      
      // ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 100);
    }
    
    // Google ë¡œê·¸ì¸
    async function handleGoogleLogin() {
      console.log('ğŸ” Google ë¡œê·¸ì¸ ì‹œì‘');
      showStatus('Google ë¡œê·¸ì¸ ì¤‘...', 'info');
      
      if (!supabaseClient) {
        showStatus('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.', 'error');
        return;
      }
      
      try {
        const { data, error } = await supabaseClient.auth.signInWithOAuth({
          provider: 'google',
          options: {
            redirectTo: 'https://namkyungsteel.com'
          }
        });
        
        if (error) {
          console.error('âŒ Google ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
          showStatus('Google ë¡œê·¸ì¸ ì˜¤ë¥˜: ' + error.message, 'error');
        } else {
          console.log('âœ… Google OAuth ì‹œì‘ë¨:', data);
          showStatus('Google ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...', 'success');
        }
      } catch (error) {
        console.error('âŒ Google ë¡œê·¸ì¸ ì˜ˆì™¸:', error);
        showStatus('Google ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
      }
    }

    // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
    async function handleKakaoLogin() {
      console.log('ğŸ” Kakao ë¡œê·¸ì¸ ì‹œì‘');
      showStatus('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¤‘...', 'info');
      
      if (!supabaseClient) {
        showStatus('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.', 'error');
        return;
      }
      
      try {
        const { data, error } = await supabaseClient.auth.signInWithOAuth({
          provider: 'kakao',
          options: {
            redirectTo: 'https://namkyungsteel.com',
            scopes: 'profile_nickname profile_image account_email' // ì´ë©”ì¼ í¬í•¨
          }
        });
        
        if (error) {
          console.error('âŒ Kakao ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
          showStatus('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì˜¤ë¥˜: ' + error.message, 'error');
        } else {
          console.log('âœ… Kakao OAuth ì‹œì‘ë¨:', data);
          showStatus('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...', 'success');
        }
      } catch (error) {
        console.error('âŒ Kakao ë¡œê·¸ì¸ ì˜ˆì™¸:', error);
        showStatus('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
      }
    }
    
    // OAuth ì½œë°± ì²˜ë¦¬
    async function handleOAuthCallback() {
      const urlParams = new URLSearchParams(window.location.search);
      const hashParams = new URLSearchParams(window.location.hash.substring(1));
      
      if (urlParams.get('code') || hashParams.get('access_token') || window.location.hash.includes('access_token')) {
        console.log('ğŸ” OAuth ì½œë°± ê°ì§€ë¨');
        
        try {
          const { data: { session }, error } = await supabaseClient.auth.getSession();
          
          if (error && !error.message.includes('skew')) {
            console.error('âŒ ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:', error);
            return;
          }
          
          if (session && session.user) {
            console.log('âœ… OAuth ë¡œê·¸ì¸ ì„±ê³µ:', session.user);
            
            // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‹¤ì œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
            let dbUser = null;
            try {
              if (session.user.email) {
                const { data: existingUserByEmail, error: emailError } = await supabaseClient
                  .from('users')
                  .select('*')
                  .eq('email', session.user.email)
                  .single();
                
                if (!emailError && existingUserByEmail) {
                  dbUser = existingUserByEmail;
                  console.log('ğŸ“‹ ì´ë©”ì¼ë¡œ ê¸°ì¡´ ì‚¬ìš©ì ì°¾ìŒ:', dbUser);
                }
              }
              
              if (!dbUser && session.user.id) {
                const { data: existingUserByOAuth, error: oauthError } = await supabaseClient
                  .from('users')
                  .select('*')
                  .eq('oauth_id', session.user.id)
                  .single();
                
                if (!oauthError && existingUserByOAuth) {
                  dbUser = existingUserByOAuth;
                  console.log('ğŸ“‹ OAuth IDë¡œ ê¸°ì¡´ ì‚¬ìš©ì ì°¾ìŒ:', dbUser);
                }
              }
            } catch (lookupError) {
              console.log('ğŸ” ì‚¬ìš©ì ì¡°íšŒ ì¤‘:', lookupError.message);
            }
            
            // ì‚¬ìš©ì ì •ë³´ êµ¬ì„±
            const actualProvider = session.user.app_metadata?.provider || 'unknown';
            const user = dbUser ? {
              id: dbUser.id,
              email: dbUser.email,
              name: dbUser.name,
              role: dbUser.role,
              department: dbUser.department,
              position: dbUser.position,
              company_domain: dbUser.company_domain,
              company_name: dbUser.company_name,
              profileImage: dbUser.profile_image || session.user.user_metadata?.avatar_url || session.user.user_metadata?.picture,
              profile_image: dbUser.profile_image,
              oauth_id: dbUser.oauth_id,
              oauth_provider: dbUser.oauth_provider,
              provider: actualProvider,
              is_approved: dbUser.is_approved,
              is_active: dbUser.is_active
            } : {
              id: session.user.id,
              email: session.user.email,
              name: session.user.user_metadata?.name || session.user.user_metadata?.full_name || session.user.email,
              profileImage: session.user.user_metadata?.avatar_url || session.user.user_metadata?.picture,
              provider: actualProvider
            };
            
            // users í…Œì´ë¸” ì €ì¥ì€ ì´ë¯¸ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì²˜ë¦¬ë¨ (ì£¼ì„ ì²˜ë¦¬)
            console.log('ğŸ“‹ ìµœì¢… ì‚¬ìš©ì ì •ë³´:', user);
            /*
            try {
              const { data: existingUser, error: selectError } = await supabaseClient
                .from('users')
                .select('id')
                .eq('id', user.id)
                .single();
              
              if (!existingUser) {
                // ìƒˆ ì‚¬ìš©ìë¼ë©´ users í…Œì´ë¸”ì— ì €ì¥
                console.log('ğŸ”„ ìƒˆ ì‚¬ìš©ì ì €ì¥ ê±´ë„ˆëœ€ (ì´ë¯¸ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬)');
              }
            } catch (tableError) {
              console.log('ğŸ”„ ì‚¬ìš©ì í…Œì´ë¸” ì²˜ë¦¬ ê±´ë„ˆëœ€');
            }
            */
            
            saveUserAndUpdateUI(user);
            
            // URL ì •ë¦¬
            window.history.replaceState({}, document.title, window.location.pathname);
            
            // ë¡œê·¸ì¸ ì œê³µìì— ë”°ë¥¸ ë©”ì‹œì§€ í‘œì‹œ
            const provider = user.provider || 'OAuth';
            let providerName = '';
            if (provider === 'google') {
                providerName = 'Google';
            } else if (provider === 'kakao') {
                providerName = 'ì¹´ì¹´ì˜¤';
            } else {
                providerName = 'ì†Œì…œ';
            }
            alert(`${providerName} ë¡œê·¸ì¸ ì„±ê³µ! í™˜ì˜í•©ë‹ˆë‹¤, ${user.name}`);
            
            // employee-dashboardë¡œ ì¦‰ì‹œ ì´ë™
            window.location.href = 'employee-dashboard.html';
          }
        } catch (error) {
          if (!error.message.includes('skew')) {
            console.error('âŒ OAuth ì½œë°± ì²˜ë¦¬ ì˜¤ë¥˜:', error);
          }
        }
      }
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ OAuth ì½œë°± ì²˜ë¦¬ë§Œ ìˆ˜í–‰ (ë¡œê·¸ì¸ ìƒíƒœëŠ” ë„¤ë¹„ë°”ì—ì„œ ê´€ë¦¬)
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ“„ í˜ì´ì§€ ë¡œë“œë¨');
      
      // OAuth ì½œë°± ì²˜ë¦¬
      handleOAuthCallback();
    });
    
    // ì €ì¥ëœ ì‚¬ìš©ì ì„¸ì…˜ í™•ì¸ ë° ë³µì›
    function checkAndRestoreUserSession() {
      const currentUser = sessionStorage.getItem('currentUser');
      if (currentUser) {
        try {
          const user = JSON.parse(currentUser);
          console.log('âœ… ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ ë³µì›:', user);
          updateUIForLoggedInUser(user);
        } catch (error) {
          console.error('âŒ ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', error);
          sessionStorage.removeItem('currentUser');
          updateUIForLoggedOutUser();
        }
      } else {
        console.log('â„¹ï¸ ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ ì—†ìŒ');
        updateUIForLoggedOutUser();
      }
    }
    
    // í”„ë¡œí•„ í´ë¦­ í•¸ë“¤ëŸ¬
    function handleProfileClick() {
      showProfileModal();
    }
    
    // ê¸°ë³¸ ì•„ë°”íƒ€ ìƒì„± í•¨ìˆ˜
    function generateDefaultAvatar(name) {
      // ê¸°ë³¸ ì•„ë°”íƒ€ ì´ë¯¸ì§€ ë°˜í™˜
      return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB4PSIyMCIgeT0iMjQiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfkYQ8L3N2Zz4KPC9zdmc+';
    }

    // í”„ë¡œí•„ ëª¨ë‹¬ í‘œì‹œ
    function showProfileModal() {
      const currentUser = sessionStorage.getItem('currentUser');
      if (currentUser) {
        try {
          const user = JSON.parse(currentUser);
          
          // í”„ë¡œí•„ ì´ë¯¸ì§€ ì„¤ì •
          const modalProfileImage = document.getElementById('modalProfileImage');
          if (user.profileImage) {
            modalProfileImage.src = user.profileImage;
          } else {
            // ê¸°ë³¸ ì•„ë°”íƒ€ ìƒì„±
            modalProfileImage.src = generateDefaultAvatar(user.name || user.email);
          }
          
          // í”„ë¡œí•„ ëª¨ë‹¬ ì •ë³´ ì—…ë°ì´íŠ¸
          document.getElementById('profileUserName').value = user.name || '';
          document.getElementById('profileUserEmail').value = user.email || '';
          document.getElementById('profileUserDepartment').value = user.department || '';
          document.getElementById('profileUserPosition').value = user.position || '';
          
          // ëª¨ë‹¬ í‘œì‹œ
          document.getElementById('profileModal').style.display = 'flex';
        } catch (error) {
          console.error('âŒ ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:', error);
        }
      }
    }
    
    // í”„ë¡œí•„ ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
    function hideProfileModal() {
      document.getElementById('profileModal').style.display = 'none';
    }
    
    // ì „ì—­ í•¨ìˆ˜ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡
    window.testGoogleLogin = handleGoogleLogin;
    window.testSupabase = function() {
      console.log('Supabase í´ë¼ì´ì–¸íŠ¸:', supabaseClient);
      return supabaseClient !== null;
    };
    // í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ
    async function handleProfileImageUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      // íŒŒì¼ í¬ê¸° ì œí•œ (2MB)
      if (file.size > 2 * 1024 * 1024) {
        alert('ì´ë¯¸ì§€ í¬ê¸°ëŠ” 2MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
        return;
      }
      
      // ì´ë¯¸ì§€ íŒŒì¼ í™•ì¸
      if (!file.type.startsWith('image/')) {
        alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = async function(e) {
        const imageData = e.target.result;
        
        try {
          const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
          
          // ë°ì´í„°ë² ì´ìŠ¤ì— ì—…ë°ì´íŠ¸ (Google OAuth ì‚¬ìš©ìëŠ” ì´ë©”ì¼ë¡œ ì‹ë³„)
          if (supabaseClient) {
            try {
              // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì°¾ì•„ì„œ ì—…ë°ì´íŠ¸
              const { data, error } = await supabaseClient
                .from('users')
                .update({ 
                  profile_image: imageData,
                  updated_at: new Date().toISOString()
                })
                .eq('email', currentUser.email)
                .select();
                
              if (error) {
                console.error('ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
              } else {
                console.log('í”„ë¡œí•„ ì´ë¯¸ì§€ ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
              }
            } catch (dbError) {
              console.error('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜:', dbError);
            }
          }
          
          // currentUser ê°ì²´ ì—…ë°ì´íŠ¸
          currentUser.profileImage = imageData;
          
          // sessionStorageì— ì—…ë°ì´íŠ¸ëœ ì •ë³´ ì €ì¥
          sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
          
          // UI ì—…ë°ì´íŠ¸
          const modalProfileImage = document.getElementById('modalProfileImage');
          if (modalProfileImage) modalProfileImage.src = imageData;
          
          // í—¤ë”ì˜ í”„ë¡œí•„ ì´ë¯¸ì§€ë„ ì—…ë°ì´íŠ¸
          const headerProfileImages = document.querySelectorAll('.user-profile img, .profile-image img');
          headerProfileImages.forEach(img => {
            img.src = imageData;
          });
          
          alert('í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } catch (error) {
          console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì˜¤ë¥˜:', error);
          alert('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
      };
      reader.readAsDataURL(file);
    }

    // ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ (ê³µí†µ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©)
    window.handleProfileClick = handleProfileClick;
    window.showProfileModal = showProfileModal;
    window.hideProfileModal = hideProfileModal;
    window.handleProfileImageUpload = handleProfileImageUpload;
    window.logout = logout;
    
    // ì›ë³¸ í•¨ìˆ˜ë“¤ì„ ë°±ì—… (ë„¤ë¹„ë°”ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡)
    window._originalShowLoginModal = showLoginModal;
    window._originalHandleProfileClick = handleProfileClick;
  </script>

  
  <!-- ê³µí†µ ì»´í¬ë„ŒíŠ¸ ë¡œë“œ -->
  <script src="includes/common.js"></script>
  
  <!-- Authentication Scripts will be loaded later -->

  <!-- Initialize AOS and PureCounter -->
  <script>
    // Initialize AOS (Animation on Scroll)
    if (typeof AOS !== 'undefined') {
      AOS.init({
        duration: 600,
        easing: 'ease-in-out',
        once: true,
        mirror: false
      });
    }
    
    // Initialize PureCounter
    if (typeof PureCounter !== 'undefined') {
      new PureCounter();
    }
    
    // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ í´ë¦­ ê¸°ëŠ¥ (ëª¨ë°”ì¼ìš©)
    document.addEventListener('DOMContentLoaded', function() {
      const dropdownToggles = document.querySelectorAll('.toggle-dropdown');
      
      dropdownToggles.forEach(function(toggle) {
        toggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const dropdown = this.closest('.dropdown');
          const isActive = dropdown.classList.contains('active');
          
          // ë‹¤ë¥¸ ëª¨ë“  ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
          document.querySelectorAll('.dropdown.active').forEach(function(activeDropdown) {
            if (activeDropdown !== dropdown) {
              activeDropdown.classList.remove('active');
            }
          });
          
          // í˜„ì¬ ë“œë¡­ë‹¤ìš´ í† ê¸€
          dropdown.classList.toggle('active', !isActive);
        });
      });
      
      // ì™¸ë¶€ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.dropdown')) {
          document.querySelectorAll('.dropdown.active').forEach(function(dropdown) {
            dropdown.classList.remove('active');
          });
        }
      });
    });
    
    // Initialize Swiper if needed
    if (typeof Swiper !== 'undefined') {
      const swiper = new Swiper('.swiper', {
        loop: true,
        autoplay: {
          delay: 5000,
        },
        breakpoints: {
          320: {
            slidesPerView: 2,
            spaceBetween: 40
          },
          480: {
            slidesPerView: 3,
            spaceBetween: 60
          },
          640: {
            slidesPerView: 4,
            spaceBetween: 80
          },
          992: {
            slidesPerView: 6,
            spaceBetween: 120
          }
        }
      });
    }
  </script>

  <!-- í”„ë¡œí•„ ëª¨ë‹¬ -->
  <div class="modal" id="profileModal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>í”„ë¡œí•„ ì„¤ì •</h2>
        <button class="close-btn" onclick="hideProfileModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <div class="profile-section">
          <div class="profile-image-section">
            <div class="current-profile-image">
              <img id="modalProfileImage" src="" alt="í”„ë¡œí•„ ì´ë¯¸ì§€" />
            </div>
            <div class="profile-image-upload">
              <input type="file" id="profileImageInput" accept="image/*" style="display: none;" onchange="handleProfileImageUpload(event)">
              <button type="button" onclick="document.getElementById('profileImageInput').click()">ì´ë¯¸ì§€ ë³€ê²½</button>
            </div>
          </div>
          
          <form id="profileForm">
            <div class="form-group">
              <label>ì´ë¦„</label>
              <input type="text" id="profileUserName" readonly>
            </div>
            
            <div class="form-group">
              <label>ì´ë©”ì¼</label>
              <input type="email" id="profileUserEmail" readonly>
            </div>
            
            <div class="form-group">
              <label>ë¶€ì„œ</label>
              <input type="text" id="profileUserDepartment" readonly>
            </div>
            
            <div class="form-group">
              <label>ì§ì±…</label>
              <input type="text" id="profileUserPosition" readonly>
            </div>
          </form>
        </div>
        
        <div class="password-section">
          <h3>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>
          <form id="passwordChangeForm">
            <div class="form-group">
              <label>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
              <input type="password" id="currentPassword" required>
            </div>
            
            <div class="form-group">
              <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
              <input type="password" id="newPassword" required minlength="6">
            </div>
            
            <div class="form-group">
              <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
              <input type="password" id="confirmPasswordChange" required>
            </div>
            
            <button type="submit" class="btn-change-password">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
          </form>
        </div>
      </div>
      
      <div class="modal-footer">
        <button onclick="logout()" class="btn-logout">ë¡œê·¸ì•„ì›ƒ</button>
        <button onclick="hideProfileModal()" class="btn-close">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <style>
    /* í”„ë¡œí•„ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      max-height: 80%;
      overflow-y: auto;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #eee;
    }
    
    .modal-header h2 {
      margin: 0;
      color: #333;
    }
    
    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      color: #999;
      cursor: pointer;
      position: absolute;
      right: 20px;
      top: 20px;
      padding: 5px;
      width: 35px;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: color 0.3s ease;
      z-index: 1001;
    }
    
    .close-btn:hover {
      color: #333;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .profile-image-section {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .current-profile-image img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #667eea;
      margin-bottom: 15px;
    }
    
    .profile-image-upload button {
      background: #667eea;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }
    
    .form-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
    }
    
    .form-group input[readonly] {
      background: #f5f5f5;
    }
    
    .password-section {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    
    .password-section h3 {
      margin-bottom: 20px;
      color: #333;
    }
    
    .btn-change-password {
      width: 100%;
      background: #28a745;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }
    
    .btn-change-password:hover {
      background: #218838;
    }
    
    .modal-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-top: 1px solid #eee;
      gap: 10px;
    }
    
    .btn-logout {
      background: #dc3545;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      white-space: nowrap;
      min-width: 80px;
    }
    
    .btn-logout:hover {
      background: #c82333;
    }
    
    .btn-close {
      background: #6c757d;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.3s ease;
      white-space: nowrap;
      min-width: 80px;
    }
    
    .btn-close:hover {
      background: #545b62;
    }
  </style>

</body>
</html>
