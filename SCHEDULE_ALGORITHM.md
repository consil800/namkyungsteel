# 스케줄 생성 알고리즘 v6.1

> ChatGPT + Claude 협업 설계 (2026-01-05)

## 알고리즘 개요

철강 영업팀의 효율적인 방문 스케줄을 자동 생성합니다.
**점수 기반 우선순위**로 업체를 선정하고, **TSP 알고리즘**으로 경로를 최적화합니다.

## 우선순위 체계 (점수 낮을수록 우선)

| 순위 | 항목 | 설명 |
|------|------|------|
| 1 | 방문 오래된 업체 | staleDays 30일 cap, 정규화 (0~10점) |
| 2 | 방문 횟수 적은 업체 | visit_count 기반 |
| 3 | 월 2회 제한 | 월 3회 이상 방문 차단 |
| 4 | 지역 쿨다운 | 같은 지역 3~4일 연속 방문 억제 |
| 5 | 월/금 근거리 우선 | 본사 60km 이내 업체 보너스 |
| 6 | 이동비용 페널티 | 먼 업체일수록 우선순위 하향 |

## 경로 최적화

```
1. Nearest Neighbor: 가장 가까운 업체 순서로 초기 경로 생성
2. 2-opt 개선: 교차 경로 제거하여 총 이동거리 단축
3. 거리 표시: 각 업체 옆에 이전 업체와의 거리(km) 표시
```

## 핵심 설정값

### 본사 좌표 (베이스캠프)
```
부산광역시 사상구 남경철강
위도: 35.1547, 경도: 128.9914
```

### 월/금 근거리 보너스
```
기준 거리: 60km
최대 보너스: 20점
계산: bonus = (60 - 거리) / 60 * 20
```

### 하루 방문 업체 수 옵션

| 옵션 | min | max | target |
|------|-----|-----|--------|
| 1~3개 | 1 | 3 | 2 |
| 4~5개 | 4 | 5 | 5 |
| 6~8개 | 6 | 8 | 7 |
| 9~11개 | 9 | 11 | 10 |

## 제약 완화 (Relaxation)

후보가 부족할 때 단계적으로 제약을 완화합니다:

| Level | 월 제한 | 지역 쿨다운 |
|-------|---------|-------------|
| 0 | 2회 | 3일 |
| 1 | 3회 | 2일 |
| 2 | 무제한 | 1일 |

## 콘솔 로그 예시

```
🚀 v6.0 통합 알고리즘 시작 (ChatGPT + Claude 협업)
📊 필터 후 업체 수: 31개
📅 평일 수: 23일
🎯 방문 범위: min=1, max=3, target=2

📆 Day 1: 2026-01-05
  ✅ Level 0: 후보 16개 확보
  ✅ 배정: 3개, 지역: [김해, 부산]

🎉 v6.0 통합 알고리즘 완료
총 배정: 31개, 미배정: 0개
```

---
*최종 업데이트: 2026-01-05*
